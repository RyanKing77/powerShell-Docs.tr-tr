---
title: Bir yönetim OData Web hizmeti için kaynak ekleme | Microsoft Docs
ms.custom: ''
ms.date: 09/13/2016
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: e620bf6d-76be-47b0-a7a8-f43418f30c60
caps.latest.revision: 6
ms.openlocfilehash: b81a32b867795ae51c3f5308c2f82c31ed2747fa
ms.sourcegitcommit: e7445ba8203da304286c591ff513900ad1c244a4
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/23/2019
ms.locfileid: "62080790"
---
# <a name="adding-resources-to-a-management-odata-web-service"></a><span data-ttu-id="7aec2-102">Yönetim OData Web Hizmetine Kaynaklar Ekleme</span><span class="sxs-lookup"><span data-stu-id="7aec2-102">Adding Resources to a Management OData Web Service</span></span>

<span data-ttu-id="7aec2-103">Bu örnek, bir kaynak yönetimi OData şema Tasarımcısı kullanarak mevcut bir yönetim OData web hizmetini eklemek gösterilmiştir.</span><span class="sxs-lookup"><span data-stu-id="7aec2-103">This example demonstrates how to add a resource to an existing Management OData web service by using the Management OData Schema Designer.</span></span> <span data-ttu-id="7aec2-104">[PswsRoleBasedPlugins](https://code.msdn.microsoft.com:443/windowsdesktop/PswsRoleBasedPlugins-9c79b75a) örnek işlem hem de sunucu kaynaklarınızın gösteren bir web hizmeti oluşturur.</span><span class="sxs-lookup"><span data-stu-id="7aec2-104">The [PswsRoleBasedPlugins](https://code.msdn.microsoft.com:443/windowsdesktop/PswsRoleBasedPlugins-9c79b75a) sample creates a web service that exposes the Process and Server resources.</span></span> <span data-ttu-id="7aec2-105">Bu örnekte, web hizmetine bir sanal makine (VM) kaynak ekleyeceksiniz.</span><span class="sxs-lookup"><span data-stu-id="7aec2-105">In this example, you will add a Virtual Machine (VM) resource to the web service.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="7aec2-106">Önkoşullar</span><span class="sxs-lookup"><span data-stu-id="7aec2-106">Prerequisites</span></span>

<span data-ttu-id="7aec2-107">Bu konu, indirdiğinizi ve yüklediğinizi olduğunu varsayar [PswsRoleBasedPlugins](https://code.msdn.microsoft.com:443/windowsdesktop/PswsRoleBasedPlugins-9c79b75a) örnek bölümünde anlatıldığı gibi [Windows PowerShell Web servisi yaratmak](./creating-a-management-odata-web-service.md), ve indirmiş ve yüklü [Yönetim OData şema Tasarımcısı](https://marketplace.visualstudio.com/items?itemName=jlisc0.ManagementODataSchemaDesigner).</span><span class="sxs-lookup"><span data-stu-id="7aec2-107">This topic assumes that you have downloaded and installed the [PswsRoleBasedPlugins](https://code.msdn.microsoft.com:443/windowsdesktop/PswsRoleBasedPlugins-9c79b75a) sample as described in [Creating a Windows PowerShell Web Service](./creating-a-management-odata-web-service.md), and that you have downloaded and installed the [Management OData Schema Designer](https://marketplace.visualstudio.com/items?itemName=jlisc0.ManagementODataSchemaDesigner).</span></span> <span data-ttu-id="7aec2-108">Bu konu, ayrıca Yönetim Odata uç noktasını ayarladığınız bilgisayarda yüklü Hyper-V Windows PowerShell modülünü sahip olduğunuzu varsayar.</span><span class="sxs-lookup"><span data-stu-id="7aec2-108">This topic also assumes that you have the Hyper-V Windows PowerShell module installed on the computer where you set up the Management Odata endpoint.</span></span>

## <a name="adding-vm-as-a-resource-to-the-web-service"></a><span data-ttu-id="7aec2-109">VM bir kaynak olarak Web hizmetine ekleme</span><span class="sxs-lookup"><span data-stu-id="7aec2-109">Adding VM as a Resource to the Web Service</span></span>

<span data-ttu-id="7aec2-110">İlk adım, şema Tasarımcısı'na mevcut yönetim OData uç noktasından şema aktarmaktır.</span><span class="sxs-lookup"><span data-stu-id="7aec2-110">The first step is to import the schema from the existing Management OData endpoint into the schema designer.</span></span> <span data-ttu-id="7aec2-111">Aşağıdaki yordam bunun nasıl yapılacağını açıklar.</span><span class="sxs-lookup"><span data-stu-id="7aec2-111">The following procedure describes how to do that.</span></span>

#### <a name="importing-an-existing-schema-into-the-schema-designer"></a><span data-ttu-id="7aec2-112">Var olan bir şema şema Tasarımcısı'na aktarma</span><span class="sxs-lookup"><span data-stu-id="7aec2-112">Importing an existing schema into the schema designer</span></span>

1. <span data-ttu-id="7aec2-113">Management OData şema Tasarımcısı'nı açın.</span><span class="sxs-lookup"><span data-stu-id="7aec2-113">Open the Management OData Schema Designer.</span></span>

2. <span data-ttu-id="7aec2-114">Gelen **dosya** menüsünde **dosya** ; **Yeni** ; **Dosya**.</span><span class="sxs-lookup"><span data-stu-id="7aec2-114">From the **File** menu, select **File** ; **New** ; **File**.</span></span> <span data-ttu-id="7aec2-115">**Yeni dosya** iletişim kutusu görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="7aec2-115">The **New File** dialog appears.</span></span>

3. <span data-ttu-id="7aec2-116">Tıklayın **Yönetimi OData modeline**ve ardından **açık**.</span><span class="sxs-lookup"><span data-stu-id="7aec2-116">Click **Management OData Model**, and then click **Open**.</span></span>

4. <span data-ttu-id="7aec2-117">Ana penceresinde sağ tıklayın ve **şema dosyası** ; **Alma**.</span><span class="sxs-lookup"><span data-stu-id="7aec2-117">Right-click in the main window, and click **Schema file** ; **Import**.</span></span> <span data-ttu-id="7aec2-118">**Açık** iletişim kutusu görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="7aec2-118">The **Open** dialog appears.</span></span>

5. <span data-ttu-id="7aec2-119">Management OData web hizmeti için ayarlandığında klasöre gidin [PswsRoleBasedPlugins](https://code.msdn.microsoft.com:443/windowsdesktop/PswsRoleBasedPlugins-9c79b75a) örnek.</span><span class="sxs-lookup"><span data-stu-id="7aec2-119">Navigate to the folder where you set up the Management OData web service for the [PswsRoleBasedPlugins](https://code.msdn.microsoft.com:443/windowsdesktop/PswsRoleBasedPlugins-9c79b75a) sample.</span></span> <span data-ttu-id="7aec2-120">Betik değiştirmeden uç noktasını ayarlamak için bu örnek ile sağlanan Windows PowerShell Betiği kullandıysanız, bu klasördür **C:\inetpub\wwwroot\Modata**.</span><span class="sxs-lookup"><span data-stu-id="7aec2-120">If you used the Windows PowerShell script provided with that sample to set up the endpoint without modifying the script, that folder is **C:\inetpub\wwwroot\Modata**.</span></span> <span data-ttu-id="7aec2-121">Schema.MOF seçip tıklayın **açık**.</span><span class="sxs-lookup"><span data-stu-id="7aec2-121">Select Schema.mof, and click **Open**.</span></span>

   <span data-ttu-id="7aec2-122">Bu noktada, Schema.mof ve Schema.xml dosyalar bir metin düzenleyicisinde açın ve işlem ve hizmet kaynaklarınız için eşlemelerini içermediğine dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="7aec2-122">At this point, open the Schema.mof and Schema.xml files in a text editor, and notice that they contain mappings for the Process and Service resources.</span></span> <span data-ttu-id="7aec2-123">Schema.mof dosyasını kullanan [Distributed Management Task Force](https://www.dmtf.org/) (DTMF) Yönetilen Nesne (MOF) standart.</span><span class="sxs-lookup"><span data-stu-id="7aec2-123">The Schema.mof file uses [Distributed Management  Task Force](https://www.dmtf.org/) (DTMF) Managed Object (MOF) standard.</span></span> <span data-ttu-id="7aec2-124">Schema.xml dosya açıklanan bir XML şeması kullanır [kaynak eşleme şeması](./resource-mapping-schema.md).</span><span class="sxs-lookup"><span data-stu-id="7aec2-124">The schema.xml file uses an XML schema that is described in [Resource Mapping Schema](./resource-mapping-schema.md).</span></span>

   <span data-ttu-id="7aec2-125">Aşağıdaki yordam, Hyper-V cmdlet'leri için şema modeli içe aktarmayı açıklar.</span><span class="sxs-lookup"><span data-stu-id="7aec2-125">The following procedure describes how to import Hyper-V cmdlets in to the schema model.</span></span>

#### <a name="importing-cmdlets-into-the-schema"></a><span data-ttu-id="7aec2-126">Cmdlet'leri içine alma</span><span class="sxs-lookup"><span data-stu-id="7aec2-126">Importing cmdlets into the schema</span></span>

1. <span data-ttu-id="7aec2-127">Şema Tasarımcısı penceresinin boş bir alana sağ tıklayın ve **içeri aktarma cmdlet'leri**.</span><span class="sxs-lookup"><span data-stu-id="7aec2-127">Right-click on a blank area of the schema designer window, and click **Import Cmdlets**.</span></span> <span data-ttu-id="7aec2-128">**Cmdlet'i İçeri Aktarma Sihirbazı** iletişim kutusu görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="7aec2-128">The **Cmdlet Import Wizard** dialog appears.</span></span>

2. <span data-ttu-id="7aec2-129">Emin **yerel bilgisayar** seçilir ve tıklayın **sonraki**.</span><span class="sxs-lookup"><span data-stu-id="7aec2-129">Make sure **Local Computer** is selected, and click **Next**.</span></span>

3. <span data-ttu-id="7aec2-130">Yüklü olan Windows PowerShell modülleri'nin seçili olduğundan emin olun ve Hyper-V aşağı açılan listeden seçin.</span><span class="sxs-lookup"><span data-stu-id="7aec2-130">Make sure that Installed Windows PowerShell Modules is selected, and select Hyper-V from the drop-down list.</span></span> <span data-ttu-id="7aec2-131">Tıklayın **sonraki**.</span><span class="sxs-lookup"><span data-stu-id="7aec2-131">click **Next**.</span></span> <span data-ttu-id="7aec2-132">**İleri**’ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="7aec2-132">Click **Next**.</span></span>

4. <span data-ttu-id="7aec2-133">İçinde **cmdlet'i isim** listesinden **VM**.</span><span class="sxs-lookup"><span data-stu-id="7aec2-133">In the **Cmdlet Noun** list, select **VM**.</span></span> <span data-ttu-id="7aec2-134">**İleri**'ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="7aec2-134">Click **Next**</span></span>

5. <span data-ttu-id="7aec2-135">Bu örnekte, biz yalnızca Get ve Delete komutlarını cmdlet'leri ile bağlayın.</span><span class="sxs-lookup"><span data-stu-id="7aec2-135">For this example, we will bind only the Get and Delete commands with cmdlets.</span></span> <span data-ttu-id="7aec2-136">Temizle **Oluştur** ve **güncelleştirme** onay kutusunu ve emin olun **alma** ve **Sil** onay kutularını denetlenir.</span><span class="sxs-lookup"><span data-stu-id="7aec2-136">Clear the **CREATE** and **UPDATE** checkboxes, and make sure the **GET** and **DELETE** checkboxes are checked.</span></span> <span data-ttu-id="7aec2-137">Emin olun `Get-VM` cmdlet'i için seçilen **alma**ve `Remove-VM` cmdlet'i için seçilen **Sil**.</span><span class="sxs-lookup"><span data-stu-id="7aec2-137">Make sure that the `Get-VM` cmdlet is selected for **GET**, and the `Remove-VM` cmdlet is selected for **DELETE**.</span></span>

6. <span data-ttu-id="7aec2-138">Meta veriler VM cmdlet'ler için çıktı türü belirtmediğinden çıktı türü belirtmek için bu cmdlet'i çalıştırmak gerekir.</span><span class="sxs-lookup"><span data-stu-id="7aec2-138">Because the metadata for the VM cmdlets does not specify an output type, you will need to run the cmdlet to specify the output type.</span></span> <span data-ttu-id="7aec2-139">Seçin **sağlama çıktı türü** tıklatıp **cmdlet'ini çalıştırın**.</span><span class="sxs-lookup"><span data-stu-id="7aec2-139">Select **Provide output type** and click **Run cmdlet**.</span></span> <span data-ttu-id="7aec2-140">**Cmdlet'ini çalıştırmak** iletişim kutusu görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="7aec2-140">The **Run Cmdlet** dialog appears.</span></span> <span data-ttu-id="7aec2-141">**Çalıştır**’a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="7aec2-141">Click **Run**.</span></span> <span data-ttu-id="7aec2-142">**CLR türü** kutusu ile doldurulur `VirtualMachine` türü.</span><span class="sxs-lookup"><span data-stu-id="7aec2-142">The **CLR Type** box is populated with the `VirtualMachine` type.</span></span> <span data-ttu-id="7aec2-143">Tıklayın **Tamam**, ardından **sonraki**.</span><span class="sxs-lookup"><span data-stu-id="7aec2-143">Click **OK**, then click **Next**.</span></span>

7. <span data-ttu-id="7aec2-144">Varsayılan olarak, tüm VirtualMachine nesnenin özelliklerini seçilir.</span><span class="sxs-lookup"><span data-stu-id="7aec2-144">By default, all of the properties of the VirtualMachine object are selected.</span></span> <span data-ttu-id="7aec2-145">Bu kaynak web hizmetinden istediğinde döndürülen veriler bir parçası olarak istemediğiniz herhangi bir özelliği temizleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7aec2-145">You can clear any properties that you do not want as part of the data returned when you request this resource from the web service.</span></span> <span data-ttu-id="7aec2-146">**İleri**’ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="7aec2-146">Click **Next**.</span></span>

8. <span data-ttu-id="7aec2-147">Bir anahtar olarak kullanılacak en az bir özellik seçmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="7aec2-147">You must select at least one property to be used as a key.</span></span> <span data-ttu-id="7aec2-148">Seçin **adı** listesi seçeneğine tıklayıp **sonraki**.</span><span class="sxs-lookup"><span data-stu-id="7aec2-148">Select **Name** in the list, and click **Next**.</span></span>

9. <span data-ttu-id="7aec2-149">Sonraki Pencere Yönetimi OData kaynak özelliklerini temel alınan cmdlet'lerin özelliklerine eşlemenizi sağlar.</span><span class="sxs-lookup"><span data-stu-id="7aec2-149">The next window allows you to map properties of the Management OData resource to properties of the underlying cmdlets.</span></span> <span data-ttu-id="7aec2-150">Sihirbaz aynı adlara sahip özellikler varsayılan olarak eşler.</span><span class="sxs-lookup"><span data-stu-id="7aec2-150">The wizard maps properties with identical names by default.</span></span> <span data-ttu-id="7aec2-151">Örneğin, `ComputerName` özelliği kaynağı eşlenmiş durumda `ComputerName` cmdlet'lerinin özelliği.</span><span class="sxs-lookup"><span data-stu-id="7aec2-151">For example, the `ComputerName` property of the resource is mapped to the `ComputerName` property of the cmdlets.</span></span>  <span data-ttu-id="7aec2-152">Bu sayede belirtmek `ComputerName` web hizmeti isteğine bir özellik ve belirttiğiniz değerle geçirilir `Get-VM` cmdlet'i.</span><span class="sxs-lookup"><span data-stu-id="7aec2-152">This allows you to specify the `ComputerName` property in a request to the web service, and have the value you specify be passed to the `Get-VM` cmdlet.</span></span> <span data-ttu-id="7aec2-153">`Id` ve `Name` de varsayılan olarak eşleştirilir.</span><span class="sxs-lookup"><span data-stu-id="7aec2-153">`Id` and `Name` are also mapped by default.</span></span>

   10. <span data-ttu-id="7aec2-154">Tıklayın **sonraki**, ardından **son**.</span><span class="sxs-lookup"><span data-stu-id="7aec2-154">Click **Next**, then click **Finish**.</span></span>

       <span data-ttu-id="7aec2-155">VM kaynağı artık şema tasarımcı penceresi açılır.</span><span class="sxs-lookup"><span data-stu-id="7aec2-155">The VM resource now appears in the schema designer window.</span></span> <span data-ttu-id="7aec2-156">Özellikler ve kaynak ile ilişkilendirilmiş işlemler inceleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7aec2-156">You can examine the properties and operations associated with the resource.</span></span> <span data-ttu-id="7aec2-157">Ardından, sanal dizine web hizmeti için güncelleştirilmiş şema dosyalarını verecektir.</span><span class="sxs-lookup"><span data-stu-id="7aec2-157">Next, you will export the updated schema files into the virtual directory for the web service.</span></span>

#### <a name="exporting-schema-files-from-the-schema-designer"></a><span data-ttu-id="7aec2-158">Şema Tasarımcısı'ndan şema dosyalarını dışarı aktarma</span><span class="sxs-lookup"><span data-stu-id="7aec2-158">Exporting schema files from the schema designer</span></span>

1. <span data-ttu-id="7aec2-159">Şema Tasarımcısı penceresinin boş bir alana sağ tıklayın ve **şema dosyası** ; **Dışarı**.</span><span class="sxs-lookup"><span data-stu-id="7aec2-159">Right-click on a blank area of the schema designer window, and click **Schema file** ; **Export**.</span></span> <span data-ttu-id="7aec2-160">**Kaydet** iletişim kutusu görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="7aec2-160">The **Save As** dialog appears.</span></span>

2. <span data-ttu-id="7aec2-161">MOF dosyası alındığı burada aynı dizine gidin.</span><span class="sxs-lookup"><span data-stu-id="7aec2-161">Navigate to the same directory from where you imported the MOF file.</span></span> <span data-ttu-id="7aec2-162">Dosyanın özgün MOF dosyası (varsayılan olarak Schema.mof) ile aynı ad ve tıklayın **Kaydet**.</span><span class="sxs-lookup"><span data-stu-id="7aec2-162">Name the file the same as the original MOF file (Schema.mof by default), and click **Save**.</span></span> <span data-ttu-id="7aec2-163">Varolan dosyanın üzerine yazmak istediğinizi onaylayın.</span><span class="sxs-lookup"><span data-stu-id="7aec2-163">Confirm that you want to overwrite the existing file.</span></span>

   <span data-ttu-id="7aec2-164">Bu açıkça içinde belirtilmese **Kaydet** iletişim kutusunda, bu dosyaları Schema.mof hem Schema.xml değiştirir.</span><span class="sxs-lookup"><span data-stu-id="7aec2-164">Although it is not explicitly stated in the **Save As** dialog, this replaces both the Schema.mof and Schema.xml files.</span></span>

## <a name="next-steps"></a><span data-ttu-id="7aec2-165">Sonraki Adımlar</span><span class="sxs-lookup"><span data-stu-id="7aec2-165">Next Steps</span></span>

<span data-ttu-id="7aec2-166">Management OData web hizmetinden yeni VM kaynağa erişim önce açıklandığı gibi Hyper-V Windows PowerShell modülünü erişime izin vermek için RbacConfiguration.xml dosyasını güncelleştirmeniz gerekir [yapılandırma rol tabanlı yetkilendirme](./configuring-role-based-authorization.md), ve web hizmetini yeniden başlatmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="7aec2-166">Before you access the new VM resource from the Management OData web service, you must update the RbacConfiguration.xml file to allow access to the Hyper-V Windows PowerShell module as described in [Configuring Role-based Authorization](./configuring-role-based-authorization.md), and you will also need to restart the web service.</span></span>