---
ms.date: 07/10/2019
keywords: Jea, PowerShell, güvenlik
title: JEA güvenlik konuları
ms.openlocfilehash: befc24fec368c4f6d60477daf63bf17e9431133e
ms.sourcegitcommit: e894ed833cef57967cdaf002f8c883f66864e836
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 08/25/2019
ms.locfileid: "70017912"
---
# <a name="jea-security-considerations"></a><span data-ttu-id="4faf2-103">JEA güvenlik konuları</span><span class="sxs-lookup"><span data-stu-id="4faf2-103">JEA Security Considerations</span></span>

<span data-ttu-id="4faf2-104">JEA, makinelerinizdeki kalıcı yöneticilerin sayısını azaltarak güvenlik duruşunuzu iyileştirmenize yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="4faf2-104">JEA helps you improve your security posture by reducing the number of permanent administrators on your machines.</span></span> <span data-ttu-id="4faf2-105">JEA, kullanıcıların sistemi yönetmesi için yeni bir giriş noktası oluşturmak üzere bir PowerShell oturum yapılandırması kullanır.</span><span class="sxs-lookup"><span data-stu-id="4faf2-105">JEA uses a PowerShell session configuration to create a new entry point for users to manage the system.</span></span> <span data-ttu-id="4faf2-106">Yönetici görevleri için yükseltilmiş, ancak sınırsız olmayan, makineye erişime ihtiyacı olan kullanıcılar JEA uç noktasına erişim izni verebilir.</span><span class="sxs-lookup"><span data-stu-id="4faf2-106">Users who need elevated, but not unlimited, access to the machine to do administrative tasks can be granted access to the JEA endpoint.</span></span> <span data-ttu-id="4faf2-107">JEA, bu kullanıcıların tam yönetici erişimi olmadan yönetici komutları çalıştırmasına izin verdiğinden, bu kullanıcıları son derece ayrıcalıklı güvenlik gruplarından çıkarabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4faf2-107">Since JEA allows these users to run admin commands without having full admin access, you can then remove those users from highly privileged security groups.</span></span>

## <a name="run-as-account"></a><span data-ttu-id="4faf2-108">Farklı Çalıştır hesabı</span><span class="sxs-lookup"><span data-stu-id="4faf2-108">Run-As account</span></span>

<span data-ttu-id="4faf2-109">Her JEA uç noktasının belirlenmiş bir **Farklı Çalıştır** hesabı vardır.</span><span class="sxs-lookup"><span data-stu-id="4faf2-109">Each JEA endpoint has a designated **run-as** account.</span></span> <span data-ttu-id="4faf2-110">Bu, bağlanan Kullanıcı eylemlerinin çalıştırıldığı hesaptır.</span><span class="sxs-lookup"><span data-stu-id="4faf2-110">This is the account under which the connecting user's actions are executed.</span></span> <span data-ttu-id="4faf2-111">Bu hesap [oturum yapılandırma dosyasında](session-configurations.md)yapılandırılabilir ve seçtiğiniz hesap, uç noktanızın güvenliği üzerinde önemli bir değer içerir.</span><span class="sxs-lookup"><span data-stu-id="4faf2-111">This account is configurable in the [session configuration file](session-configurations.md), and the account you choose has a significant bearing on the security of your endpoint.</span></span>

<span data-ttu-id="4faf2-112">**Sanal hesaplar** , **Farklı Çalıştır** hesabını yapılandırmanın önerilen yoludur.</span><span class="sxs-lookup"><span data-stu-id="4faf2-112">**Virtual accounts** are the recommended way of configuring the **run-as** account.</span></span> <span data-ttu-id="4faf2-113">Sanal hesaplar, bağlanan kullanıcının JEA oturumunun süresi boyunca kullanması için oluşturulan tek seferlik, geçici yerel hesaplardır.</span><span class="sxs-lookup"><span data-stu-id="4faf2-113">Virtual accounts are one-time, temporary local accounts that are created for the connecting user to use during the duration of their JEA session.</span></span> <span data-ttu-id="4faf2-114">Oturumu sonlandırıldığı anda, sanal hesap yok edilir ve artık kullanılamaz.</span><span class="sxs-lookup"><span data-stu-id="4faf2-114">As soon as their session is terminated, the virtual account is destroyed and can't be used anymore.</span></span> <span data-ttu-id="4faf2-115">Bağlanan kullanıcı sanal hesap için kimlik bilgilerini bilmez.</span><span class="sxs-lookup"><span data-stu-id="4faf2-115">The connecting user doesn't know the credentials for the virtual account.</span></span> <span data-ttu-id="4faf2-116">Sanal hesap, uzak masaüstü veya kısıtlanmış olmayan bir PowerShell uç noktası gibi diğer yollarla sisteme erişmek için kullanılamaz.</span><span class="sxs-lookup"><span data-stu-id="4faf2-116">The virtual account can't be used to access the system via other means like Remote Desktop or an unconstrained PowerShell endpoint.</span></span>

<span data-ttu-id="4faf2-117">Varsayılan olarak, sanal hesaplar makinedeki yerel **Yöneticiler** grubuna aittir.</span><span class="sxs-lookup"><span data-stu-id="4faf2-117">By default, virtual accounts belong to the local **Administrators** group on the machine.</span></span> <span data-ttu-id="4faf2-118">Bu, sistemdeki her şeyi yönetmek için tam haklar verir, ancak ağdaki kaynakları yönetmek için hiçbir haklara sahip olmaz.</span><span class="sxs-lookup"><span data-stu-id="4faf2-118">This gives them full rights to manage anything on the system, but no rights to manage resources on the network.</span></span>
<span data-ttu-id="4faf2-119">Diğer makinelerle kimlik doğrulanırken, Kullanıcı bağlamı sanal hesaba değil yerel bilgisayar hesabıdır.</span><span class="sxs-lookup"><span data-stu-id="4faf2-119">When authenticating with other machines, the user context is that of the local computer account, not the virtual account.</span></span>

<span data-ttu-id="4faf2-120">Yerel bir **Yöneticiler** grubu olmadığından, etki alanı denetleyicileri özel bir durumdur.</span><span class="sxs-lookup"><span data-stu-id="4faf2-120">Domain controllers are a special case since there isn't a local **Administrators** group.</span></span> <span data-ttu-id="4faf2-121">Bunun yerine, sanal hesaplar **etki alanı yöneticilerine** aittir ve etki alanı denetleyicisindeki dizin hizmetlerini yönetebilir.</span><span class="sxs-lookup"><span data-stu-id="4faf2-121">Instead, virtual accounts belong to **Domain Admins** and can manage the directory services on the domain controller.</span></span> <span data-ttu-id="4faf2-122">Etki alanı kimliği, JEA oturumunun örneği oluşturulan etki alanı denetleyicisinde kullanılmaya devam etmektedir.</span><span class="sxs-lookup"><span data-stu-id="4faf2-122">The domain identity is still restricted for use on the domain controller where the JEA session was instantiated.</span></span> <span data-ttu-id="4faf2-123">Bunun yerine etki alanı denetleyicisi bilgisayar nesnesinden gelen herhangi bir ağ erişimi görünür.</span><span class="sxs-lookup"><span data-stu-id="4faf2-123">Any network access appears to come from the domain controller computer object instead.</span></span>

<span data-ttu-id="4faf2-124">Her iki durumda da, sanal hesabın ait olduğu güvenlik gruplarını açıkça tanımlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4faf2-124">In both cases, you may explicitly define which security groups the virtual account belongs to.</span></span> <span data-ttu-id="4faf2-125">Bu, görev yerel veya etki alanı yöneticisi ayrıcalıkları olmadan yapılalecede iyi bir uygulamadır.</span><span class="sxs-lookup"><span data-stu-id="4faf2-125">This is a good practice when the task can be done without local or domain admin privileges.</span></span> <span data-ttu-id="4faf2-126">Yöneticileriniz için tanımlanmış bir güvenlik grubunuz zaten varsa, sanal hesap üyeliğini bu gruba verin.</span><span class="sxs-lookup"><span data-stu-id="4faf2-126">If you already have a security group defined for your admins, grant the virtual account membership to that group.</span></span> <span data-ttu-id="4faf2-127">Sanal hesap grubu üyeliği, iş istasyonundaki ve üye sunuculardaki yerel güvenlik gruplarıyla sınırlıdır.</span><span class="sxs-lookup"><span data-stu-id="4faf2-127">Virtual account group membership is limited to local security groups on workstation and member servers.</span></span> <span data-ttu-id="4faf2-128">Etki alanı denetleyicilerinde, sanal hesapların etki alanı güvenlik gruplarının üyesi olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="4faf2-128">On domain controllers, virtual accounts must be members of domain security groups.</span></span>
<span data-ttu-id="4faf2-129">Sanal hesap bir veya daha fazla güvenlik grubuna eklendikten sonra, artık varsayılan gruplara (yerel veya etki alanı yöneticileri) ait değildir.</span><span class="sxs-lookup"><span data-stu-id="4faf2-129">Once the virtual account has been added to one or more security groups, it no longer belongs to the default groups (local or domain admins).</span></span>

<span data-ttu-id="4faf2-130">Aşağıdaki tabloda, olası yapılandırma seçenekleri ve sanal hesaplar için ortaya çıkan izinler özetlenmektedir:</span><span class="sxs-lookup"><span data-stu-id="4faf2-130">The following table summarizes the possible configuration options and resulting permissions for virtual accounts:</span></span>

|        <span data-ttu-id="4faf2-131">Bilgisayar türü</span><span class="sxs-lookup"><span data-stu-id="4faf2-131">Computer type</span></span>         | <span data-ttu-id="4faf2-132">Sanal hesap grubu yapılandırması</span><span class="sxs-lookup"><span data-stu-id="4faf2-132">Virtual account group configuration</span></span> |                   <span data-ttu-id="4faf2-133">Yerel Kullanıcı bağlamı</span><span class="sxs-lookup"><span data-stu-id="4faf2-133">Local user context</span></span>                    | <span data-ttu-id="4faf2-134">Ağ Kullanıcı bağlamı</span><span class="sxs-lookup"><span data-stu-id="4faf2-134">Network user context</span></span> |
| ---------------------------- | ----------------------------------- | ------------------------------------------------------- | -------------------- |
| <span data-ttu-id="4faf2-135">Etki alanı denetleyicisi</span><span class="sxs-lookup"><span data-stu-id="4faf2-135">Domain controller</span></span>            | <span data-ttu-id="4faf2-136">Varsayılan</span><span class="sxs-lookup"><span data-stu-id="4faf2-136">Default</span></span>                             | <span data-ttu-id="4faf2-137">Etki alanı kullanıcısı, '*etki alanı*\ etki alanı yöneticileri ' üyesi</span><span class="sxs-lookup"><span data-stu-id="4faf2-137">Domain user, member of '*DOMAIN*\Domain Admins'</span></span>         | <span data-ttu-id="4faf2-138">Bilgisayar hesabı</span><span class="sxs-lookup"><span data-stu-id="4faf2-138">Computer account</span></span>     |
| <span data-ttu-id="4faf2-139">Etki alanı denetleyicisi</span><span class="sxs-lookup"><span data-stu-id="4faf2-139">Domain controller</span></span>            | <span data-ttu-id="4faf2-140">A ve B etki alanı grupları</span><span class="sxs-lookup"><span data-stu-id="4faf2-140">Domain groups A and B</span></span>               | <span data-ttu-id="4faf2-141">Etki alanı kullanıcısı, '*Domain*\a ' üyesi, '*Domain*\b '</span><span class="sxs-lookup"><span data-stu-id="4faf2-141">Domain user, member of '*DOMAIN*\A', '*DOMAIN*\B'</span></span>       | <span data-ttu-id="4faf2-142">Bilgisayar hesabı</span><span class="sxs-lookup"><span data-stu-id="4faf2-142">Computer account</span></span>     |
| <span data-ttu-id="4faf2-143">Üye sunucu veya iş istasyonu</span><span class="sxs-lookup"><span data-stu-id="4faf2-143">Member server or workstation</span></span> | <span data-ttu-id="4faf2-144">Varsayılan</span><span class="sxs-lookup"><span data-stu-id="4faf2-144">Default</span></span>                             | <span data-ttu-id="4faf2-145">Yerel Kullanıcı, '*BUILTIN*tın\administrators ' üyesi</span><span class="sxs-lookup"><span data-stu-id="4faf2-145">Local user, member of '*BUILTIN*\Administrators'</span></span>        | <span data-ttu-id="4faf2-146">Bilgisayar hesabı</span><span class="sxs-lookup"><span data-stu-id="4faf2-146">Computer account</span></span>     |
| <span data-ttu-id="4faf2-147">Üye sunucu veya iş istasyonu</span><span class="sxs-lookup"><span data-stu-id="4faf2-147">Member server or workstation</span></span> | <span data-ttu-id="4faf2-148">C ve D yerel grupları</span><span class="sxs-lookup"><span data-stu-id="4faf2-148">Local groups C and D</span></span>                | <span data-ttu-id="4faf2-149">Yerel Kullanıcı, '*bilgisayar*\c ' üyesi ve '*bilgisayar*\d '</span><span class="sxs-lookup"><span data-stu-id="4faf2-149">Local user, member of '*COMPUTER*\C' and '*COMPUTER*\D'</span></span> | <span data-ttu-id="4faf2-150">Bilgisayar hesabı</span><span class="sxs-lookup"><span data-stu-id="4faf2-150">Computer account</span></span>     |

<span data-ttu-id="4faf2-151">Güvenlik denetim olayları ve uygulama olay günlüklerine baktığınızda, her JEA Kullanıcı oturumunun benzersiz bir sanal hesaba sahip olduğunu görürsünüz.</span><span class="sxs-lookup"><span data-stu-id="4faf2-151">When you look at security audit events and application event logs, you see that each JEA user session has a unique virtual account.</span></span> <span data-ttu-id="4faf2-152">Bu benzersiz hesap, bir JEA uç noktasındaki kullanıcı eylemlerini, komutu çalıştıran özgün kullanıcıya geri izlemenize yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="4faf2-152">This unique account helps you track user actions in a JEA endpoint back to the original user who ran the command.</span></span> <span data-ttu-id="4faf2-153">Sanal hesap adları `WinRM Virtual Users\WinRM_VA_<ACCOUNTNUMBER>_<DOMAIN>_<sAMAccountName>` Örneğin, **contoso** etki alanı Kullanıcı adı bir Jea uç noktasında bir hizmeti yeniden başlatacaksa, herhangi bir hizmet denetimi Yöneticisi ile ilişkili Kullanıcı adı olacaktır. `WinRM Virtual Users\WinRM_VA_1_contoso_alice`</span><span class="sxs-lookup"><span data-stu-id="4faf2-153">Virtual account names follow the format `WinRM Virtual Users\WinRM_VA_<ACCOUNTNUMBER>_<DOMAIN>_<sAMAccountName>` For example, if user **Alice** in domain **Contoso** restarts a service in a JEA endpoint, the username associated with any service control manager events would be `WinRM Virtual Users\WinRM_VA_1_contoso_alice`.</span></span>

<span data-ttu-id="4faf2-154">**Grup tarafından yönetilen hizmet hesapları (gMSAs)** , bir üye sunucunun Jea oturumunda ağ kaynaklarına erişmesi gerektiğinde faydalıdır.</span><span class="sxs-lookup"><span data-stu-id="4faf2-154">**Group-managed service accounts (gMSAs)** are useful when a member server needs to have access to network resources in the JEA session.</span></span> <span data-ttu-id="4faf2-155">Örneğin, bir JEA uç noktası, farklı bir makinede barındırılan bir REST API hizmetine erişimi denetlemek için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="4faf2-155">For example, when a JEA endpoint is used to control access to a REST API service hosted on a different machine.</span></span> <span data-ttu-id="4faf2-156">REST API 'Leri çağırmak için işlevleri yazmak kolaydır, ancak API ile kimlik doğrulamak için bir ağ kimliği gereklidir.</span><span class="sxs-lookup"><span data-stu-id="4faf2-156">It's easy to write functions to invoke the REST APIs, but you need a network identity to authenticate with the API.</span></span> <span data-ttu-id="4faf2-157">Grup tarafından yönetilen bir hizmet hesabı kullanmak, bu, hesabı hangi bilgisayarların kullanabileceği konusunda tutarak ikinci atlamayı mümkün hale getirir.</span><span class="sxs-lookup"><span data-stu-id="4faf2-157">Using a group-managed service account makes the second hop possible while maintaining control over which computers can use the account.</span></span> <span data-ttu-id="4faf2-158">GMSA 'nın etkili izinleri, gMSA hesabının ait olduğu güvenlik grupları (yerel veya etki alanı) tarafından tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="4faf2-158">The effective permissions of the gMSA are defined by the security groups (local or domain) to which the gMSA account belongs.</span></span>

<span data-ttu-id="4faf2-159">JEA uç noktası gMSA 'yı kullanacak şekilde yapılandırıldığında, tüm JEA kullanıcılarının eylemleri aynı gMSA 'dan geliyor gibi görünür.</span><span class="sxs-lookup"><span data-stu-id="4faf2-159">When a JEA endpoint is configured to use a gMSA, the actions of all JEA users appear to come from the same gMSA.</span></span> <span data-ttu-id="4faf2-160">Eylemleri belirli bir kullanıcıya geri izlemenin tek yolu, bir PowerShell oturumunda çalıştırılan komut kümesini tanımlamaktır.</span><span class="sxs-lookup"><span data-stu-id="4faf2-160">The only way to trace actions back to a specific user is to identify the set of commands run in a PowerShell session transcript.</span></span>

<span data-ttu-id="4faf2-161">**Geçiş kimlik bilgileri** , bir **Farklı Çalıştır** hesabı belirtmezseniz kullanılır.</span><span class="sxs-lookup"><span data-stu-id="4faf2-161">**Pass-thru credentials** are used when you don't specify a **run-as** account.</span></span> <span data-ttu-id="4faf2-162">PowerShell, uzak sunucuda komutları çalıştırmak için kullanıcının kimlik bilgilerini bağlamayı kullanır.</span><span class="sxs-lookup"><span data-stu-id="4faf2-162">PowerShell uses the connecting user's credential to run commands on the remote server.</span></span> <span data-ttu-id="4faf2-163">Bunun yapılması, kullanıcıya ayrıcalıklı yönetim gruplarına doğrudan erişim izni vermenizi gerektirir.</span><span class="sxs-lookup"><span data-stu-id="4faf2-163">This requires you to grant the connecting user direct access to privileged management groups.</span></span> <span data-ttu-id="4faf2-164">Bu yapılandırma JEA için önerilmez.</span><span class="sxs-lookup"><span data-stu-id="4faf2-164">This configuration is **not** recommended for JEA.</span></span> <span data-ttu-id="4faf2-165">Bağlanan kullanıcının yönetici ayrıcalıkları zaten varsa, bu kişiler JEA 'dan kaçınabilir ve sistemi başka, sınırlandırılmamış yollarla yönetemez.</span><span class="sxs-lookup"><span data-stu-id="4faf2-165">If the connecting user already has admin privileges, they can avoid JEA and manage the system via other, unconstrained means.</span></span> <span data-ttu-id="4faf2-166">Daha fazla bilgi için bkz. [Jea 'nın yöneticilere karşı korumadığı](#jea-doesnt-protect-against-admins)bölüm.</span><span class="sxs-lookup"><span data-stu-id="4faf2-166">For more information, see the section below on how [JEA doesn't protect against admins](#jea-doesnt-protect-against-admins).</span></span>

<span data-ttu-id="4faf2-167">**Standart farklı çalıştır hesapları** , altında tüm PowerShell oturumunun çalıştırıldığı Kullanıcı hesabını belirtmenize olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="4faf2-167">**Standard run-as accounts** allow you to specify any user account under which the entire PowerShell session runs.</span></span> <span data-ttu-id="4faf2-168">Sabit **Farklı Çalıştır** hesaplarını kullanan oturum konfigürasyonları ( `-RunAsCredential` parametresiyle birlikte) Jea-Aware değildir.</span><span class="sxs-lookup"><span data-stu-id="4faf2-168">Session configurations using fixed **run-as** accounts (with the `-RunAsCredential` parameter) aren't JEA-aware.</span></span> <span data-ttu-id="4faf2-169">Rol tanımları artık beklenen şekilde çalışmaz.</span><span class="sxs-lookup"><span data-stu-id="4faf2-169">Role definitions no longer function as expected.</span></span> <span data-ttu-id="4faf2-170">Uç noktaya erişim yetkisi olan her kullanıcıya aynı rol atanır.</span><span class="sxs-lookup"><span data-stu-id="4faf2-170">Every user authorized to access the endpoint is assigned the same role.</span></span>

<span data-ttu-id="4faf2-171">Bir JEA uç noktası üzerinde **Runascredential** kullanmamanız gerekir, çünkü eylemleri belirli kullanıcılara geri izlemek zordur ve kullanıcıları rollerle eşlemek için destek yoktur.</span><span class="sxs-lookup"><span data-stu-id="4faf2-171">You shouldn't use a **RunAsCredential** on a JEA endpoint because it's difficult to trace actions back to specific users and lacks support for mapping users to roles.</span></span>

## <a name="winrm-endpoint-acl"></a><span data-ttu-id="4faf2-172">WinRM uç noktası ACL 'SI</span><span class="sxs-lookup"><span data-stu-id="4faf2-172">WinRM Endpoint ACL</span></span>

<span data-ttu-id="4faf2-173">Normal PowerShell uzaktan iletişim uç noktalarında olduğu gibi, her JEA uç noktası, JEA uç noktası ile kimlik doğrulayabilecek olan ayrı bir erişim denetim listesine (ACL) sahiptir.</span><span class="sxs-lookup"><span data-stu-id="4faf2-173">As with regular PowerShell remoting endpoints, each JEA endpoint has a separate access control list (ACL) that controls who can authenticate with the JEA endpoint.</span></span> <span data-ttu-id="4faf2-174">Yanlış yapılandırılmamışsa, güvenilen kullanıcılar JEA uç noktasına erişemeyebilir ve güvenilmeyen kullanıcıların erişimi olabilir.</span><span class="sxs-lookup"><span data-stu-id="4faf2-174">If improperly configured, trusted users may not be able to access the JEA endpoint and untrusted users may have access.</span></span> <span data-ttu-id="4faf2-175">WinRM ACL 'SI, kullanıcıların JEA rollerine eşlenmesini etkilemez.</span><span class="sxs-lookup"><span data-stu-id="4faf2-175">The WinRM ACL doesn't affect the mapping of users to JEA roles.</span></span> <span data-ttu-id="4faf2-176">Eşleme, uç noktasını kaydetmek için kullanılan oturum yapılandırma dosyasındaki **Roledefinitions** alanı tarafından denetlenir.</span><span class="sxs-lookup"><span data-stu-id="4faf2-176">Mapping is controlled by the **RoleDefinitions** field in the session configuration file used to register the endpoint.</span></span>

<span data-ttu-id="4faf2-177">Varsayılan olarak, bir JEA uç noktası birden çok rol özelliğine sahip olduğunda, WinRM ACL, tüm eşlenmiş kullanıcılara erişime izin verecek şekilde yapılandırılır.</span><span class="sxs-lookup"><span data-stu-id="4faf2-177">By default, when a JEA endpoint has multiple role capabilities, the WinRM ACL is configured to allow access to all mapped users.</span></span> <span data-ttu-id="4faf2-178">Örneğin, aşağıdaki komutlar kullanılarak yapılandırılan bir Jea oturumu ve `CONTOSO\JEA_Lev1` `CONTOSO\JEA_Lev2`için tam erişim verir.</span><span class="sxs-lookup"><span data-stu-id="4faf2-178">For example, a JEA session configured using the following commands grants full access to `CONTOSO\JEA_Lev1` and `CONTOSO\JEA_Lev2`.</span></span>

```powershell
$roles = @{ 'CONTOSO\JEA_Lev1' = 'Lev1Role'; 'CONTOSO\JEA_Lev2' = 'Lev2Role' }
New-PSSessionConfigurationFile -Path '.\jea.pssc' -SessionType RestrictedRemoteServer -RoleDefinitions $roles -RunAsVirtualAccount
Register-PSSessionConfiguration -Path '.\jea.pssc' -Name 'MyJEAEndpoint'
```

<span data-ttu-id="4faf2-179">[Get-PSSessionConfiguration](/powershell/module/microsoft.powershell.core/get-pssessionconfiguration) cmdlet 'i ile Kullanıcı izinlerini denetleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4faf2-179">You can audit user permissions with the [Get-PSSessionConfiguration](/powershell/module/microsoft.powershell.core/get-pssessionconfiguration) cmdlet.</span></span>

```powershell
Get-PSSessionConfiguration -Name 'MyJEAEndpoint' | Select-Object Permission
```

```Output
Permission
----------
CONTOSO\JEA_Lev1 AccessAllowed
CONTOSO\JEA_Lev2 AccessAllowed
```

<span data-ttu-id="4faf2-180">Hangi kullanıcıların erişimi olduğunu değiştirmek için, etkileşimli bir `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -ShowSecurityDescriptorUI` `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -SecurityDescriptorSddl <SDDL string>` istem için ya da izinleri güncelleştirmek için öğesini çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="4faf2-180">To change which users have access, run either `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -ShowSecurityDescriptorUI` for an interactive prompt or `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -SecurityDescriptorSddl <SDDL string>` to update the permissions.</span></span> <span data-ttu-id="4faf2-181">Kullanıcıların JEA uç noktasına erişmek için en az bir haklara sahip olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="4faf2-181">Users need at least *Invoke* rights to access the JEA endpoint.</span></span>

<span data-ttu-id="4faf2-182">Erişimi olan her kullanıcıya tanımlı bir rol eşleştirmeyen bir JEA uç noktası oluşturmak mümkündür.</span><span class="sxs-lookup"><span data-stu-id="4faf2-182">It's possible to create a JEA endpoint that doesn't map a defined role to every user that has access.</span></span> <span data-ttu-id="4faf2-183">Bu kullanıcılar bir JEA oturumu başlatabilir, ancak yalnızca varsayılan cmdlet 'lere erişim sahibi olabilir.</span><span class="sxs-lookup"><span data-stu-id="4faf2-183">These users can start a JEA session, but only have access to the default cmdlets.</span></span> <span data-ttu-id="4faf2-184">Çalıştırarak `Get-PSSessionCapability`bir Jea uç noktasındaki Kullanıcı izinlerini denetleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4faf2-184">You can audit user permissions in a JEA endpoint by running `Get-PSSessionCapability`.</span></span> <span data-ttu-id="4faf2-185">Daha fazla bilgi için bkz. [JEA 'Da denetleme ve raporlama](audit-and-report.md).</span><span class="sxs-lookup"><span data-stu-id="4faf2-185">For more information, see [Auditing and Reporting on JEA](audit-and-report.md).</span></span>

## <a name="least-privilege-roles"></a><span data-ttu-id="4faf2-186">En az ayrıcalık rolleri</span><span class="sxs-lookup"><span data-stu-id="4faf2-186">Least privilege roles</span></span>

<span data-ttu-id="4faf2-187">JEA rolleri tasarlarken, arka planda çalışan sanal ve grup tarafından yönetilen hizmet hesaplarının yerel makineye sınırsız erişimi olabileceğini unutmamak önemlidir.</span><span class="sxs-lookup"><span data-stu-id="4faf2-187">When designing JEA roles, it's important to remember that the virtual and group-managed service accounts running behind the scenes can have unrestricted access to the local machine.</span></span> <span data-ttu-id="4faf2-188">JEA rol özellikleri, bu ayrıcalıklı bağlamda çalıştırılabilen komutları ve uygulamaları sınırlamaya yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="4faf2-188">JEA role capabilities help limit the commands and applications that can be run in that privileged context.</span></span>
<span data-ttu-id="4faf2-189">Yanlış tasarlanmış roller, bir kullanıcının JEA sınırlarının dışına çıkmasına izin veren veya hassas bilgilere erişim sağlayan tehlikeli komutlara izin verebilir.</span><span class="sxs-lookup"><span data-stu-id="4faf2-189">Improperly designed roles can allow dangerous commands that may permit a user to break out of the JEA boundaries or obtain access to sensitive information.</span></span>

<span data-ttu-id="4faf2-190">Örneğin, aşağıdaki rol yetenek girişini göz önünde bulundurun:</span><span class="sxs-lookup"><span data-stu-id="4faf2-190">For example, consider the following role capability entry:</span></span>

```powershell
@{
    VisibleCmdlets = 'Microsoft.PowerShell.Management\*-Process'
}
```

<span data-ttu-id="4faf2-191">Bu rol özelliği, kullanıcıların, **Microsoft. PowerShell. Management** modülünden ad **Işlemiyle** herhangi bir PowerShell cmdlet 'i çalıştırmasına izin verir.</span><span class="sxs-lookup"><span data-stu-id="4faf2-191">This role capability allows users to run any PowerShell cmdlet with the noun **Process** from the **Microsoft.PowerShell.Management** module.</span></span> <span data-ttu-id="4faf2-192">Kullanıcıların sistemde hangi uygulamaların çalıştığını görmek ve `Get-Process` `Stop-Process` yanıt vermeyen uygulamaları sonlandırmak için gibi cmdlet 'lere erişmesi gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="4faf2-192">Users may need to access cmdlets like `Get-Process` to see what applications are running on the system and `Stop-Process` to kill applications that aren't responding.</span></span> <span data-ttu-id="4faf2-193">Ancak, bu giriş Ayrıca `Start-Process`, tam yönetici izinleriyle rastgele bir program başlatmak için kullanılabilecek.</span><span class="sxs-lookup"><span data-stu-id="4faf2-193">However, this entry also allows `Start-Process`, which can be used to start up an arbitrary program with full administrator permissions.</span></span> <span data-ttu-id="4faf2-194">Programın sisteme yerel olarak yüklenmesi gerekmez.</span><span class="sxs-lookup"><span data-stu-id="4faf2-194">The program doesn't need to be installed locally on the system.</span></span> <span data-ttu-id="4faf2-195">Bağlı bir Kullanıcı, Kullanıcı yerel yönetici ayrıcalıklarına sahip bir dosya paylaşımından program başlatabilir, kötü amaçlı yazılım ve daha fazlasını yapar.</span><span class="sxs-lookup"><span data-stu-id="4faf2-195">A connected user could start a program from a file share that gives the user local admin privileges, runs malware, and more.</span></span>

<span data-ttu-id="4faf2-196">Aynı rol yeteneğinin daha güvenli bir sürümü şöyle görünür:</span><span class="sxs-lookup"><span data-stu-id="4faf2-196">A more secure version of this same role capability would look like:</span></span>

```powershell
@{
    VisibleCmdlets = 'Microsoft.PowerShell.Management\Get-Process', 'Microsoft.PowerShell.Management\Stop-Process'
}
```

<span data-ttu-id="4faf2-197">Rol özellikleri ' nde joker karakter kullanmaktan kaçının.</span><span class="sxs-lookup"><span data-stu-id="4faf2-197">Avoid using wildcards in role capabilities.</span></span> <span data-ttu-id="4faf2-198">Kullanıcı tarafından hangi komutların erişilebilir olduğunu anlamak için [etkili Kullanıcı izinlerini](audit-and-report.md#check-effective-rights-for-a-specific-user) düzenli olarak denetlediğinizden emin olun.</span><span class="sxs-lookup"><span data-stu-id="4faf2-198">Be sure to regularly [audit effective user permissions](audit-and-report.md#check-effective-rights-for-a-specific-user) to understand which commands are accessible to the user.</span></span>

## <a name="jea-doesnt-protect-against-admins"></a><span data-ttu-id="4faf2-199">JEA, yöneticilere karşı korumaz</span><span class="sxs-lookup"><span data-stu-id="4faf2-199">JEA doesn't protect against admins</span></span>

<span data-ttu-id="4faf2-200">JEA 'nın temel ilkelerinin biri, yönetici olmayan yöneticilerin bazı yönetim görevlerini yapmasına izin verir.</span><span class="sxs-lookup"><span data-stu-id="4faf2-200">One of the core principles of JEA is that it allows non-admins to do some admin tasks.</span></span> <span data-ttu-id="4faf2-201">JEA, zaten yönetici ayrıcalıklarına sahip olan kullanıcılara karşı koruma vermez.</span><span class="sxs-lookup"><span data-stu-id="4faf2-201">JEA doesn't protect against users who already have administrator privileges.</span></span> <span data-ttu-id="4faf2-202">**Etki alanı yöneticilerine**, yerel **yöneticilere**veya diğer yüksek ayrıcalıklı gruplara ait kullanıcılar, Jea korumalarının başka yollarla de atlayabilirler.</span><span class="sxs-lookup"><span data-stu-id="4faf2-202">Users who belong **Domain Admins**, local **Administrators**, or other highly privileged groups can circumvent JEA's protections via another means.</span></span> <span data-ttu-id="4faf2-203">Örneğin, RDP ile oturum açabilirler, uzak MMC konsolları kullanabilir veya kısıtlanmış PowerShell uç noktalarına bağlanabilir.</span><span class="sxs-lookup"><span data-stu-id="4faf2-203">For example, they could sign in with RDP, use remote MMC consoles, or connect to unconstrained PowerShell endpoints.</span></span> <span data-ttu-id="4faf2-204">Ayrıca, bir sistemdeki yerel Yöneticiler JEA yapılandırmalarının ek kullanıcılara izin verecek veya bir kullanıcı tarafından JEA oturumunda neler yapabileceğini genişletmek üzere bir rol yeteneğini değiştirebilecekleri şekilde değiştirebilir.</span><span class="sxs-lookup"><span data-stu-id="4faf2-204">Also, local admins on a system can modify JEA configurations to allow additional users or change a role capability to extend the scope of what a user can do in their JEA session.</span></span> <span data-ttu-id="4faf2-205">Sisteme ayrıcalıklı erişim kazanmak için başka yollar olup olmadığını görmek için JEA kullanıcılarınızın genişletilmiş izinlerini değerlendirmek önemlidir.</span><span class="sxs-lookup"><span data-stu-id="4faf2-205">It's important to evaluate your JEA users' extended permissions to see if there are other ways to gain privileged access to the system.</span></span>

<span data-ttu-id="4faf2-206">Yaygın bir uygulama, JEA 'yı düzenli günlük bakım işlemleri için kullanmanın yanı sıra kullanıcıların acil durumlarda yerel Yöneticiler haline gelmesine izin veren tam zamanında ve ayrıcalıklı bir erişim yönetimi çözümüdür.</span><span class="sxs-lookup"><span data-stu-id="4faf2-206">A common practice is to use JEA for regular day-to-day maintenance and have a just-in-time, privileged access management solution that allows users to temporarily become local admins in emergency situations.</span></span> <span data-ttu-id="4faf2-207">Bu, kullanıcıların sistemde kalıcı yönetici olmamasını sağlamaya yardımcı olur, ancak bu hakları yalnızca bu haklara sahip olmaları durumunda ve yalnızca, bu izinlerin kullanımını belgeleyen bir iş akışını tamamlarlar.</span><span class="sxs-lookup"><span data-stu-id="4faf2-207">This helps ensure users aren't permanent admins on the system, but can get those rights if, and only when, they complete a workflow that documents their use of those permissions.</span></span>
