---
ms.date: 07/10/2019
keywords: Jea, PowerShell, güvenlik
title: JEA rol özellikleri
ms.openlocfilehash: 7191b90e198ffb539da6870a8ddc3e449ad9e8ae
ms.sourcegitcommit: e894ed833cef57967cdaf002f8c883f66864e836
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 08/25/2019
ms.locfileid: "70017961"
---
# <a name="jea-role-capabilities"></a><span data-ttu-id="6e0b1-103">JEA rol özellikleri</span><span class="sxs-lookup"><span data-stu-id="6e0b1-103">JEA Role Capabilities</span></span>

<span data-ttu-id="6e0b1-104">Bir JEA uç noktası oluştururken, bir JEA oturumunda ne yapabileceğini tanımlayan bir veya daha fazla rol özelliği tanımlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-104">When creating a JEA endpoint, you need to define one or more role capabilities that describe what someone can do in a JEA session.</span></span> <span data-ttu-id="6e0b1-105">Rol yeteneği, Kullanıcı bağlamak için kullanılabilir hale getirilen tüm `.psrc` cmdlet 'leri, işlevleri, sağlayıcıları ve dış programları listeleyen uzantıya sahip bir PowerShell veri dosyasıdır.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-105">A role capability is a PowerShell data file with the `.psrc` extension that lists all the cmdlets, functions, providers, and external programs that are made available to connecting users.</span></span>

## <a name="determine-which-commands-to-allow"></a><span data-ttu-id="6e0b1-106">Hangi komutların izin olacağını belirle</span><span class="sxs-lookup"><span data-stu-id="6e0b1-106">Determine which commands to allow</span></span>

<span data-ttu-id="6e0b1-107">Rol yetenek dosyası oluşturmanın ilk adımı, kullanıcıların hangi kullanıcılara erişmesi gerektiğini düşünmelidir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-107">The first step in creating a role capability file is to consider what the users need access to.</span></span> <span data-ttu-id="6e0b1-108">Gereksinim toplama işlemi biraz zaman alabilir, ancak önemli bir işlemdir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-108">The requirements gathering process can take a while, but it's an important process.</span></span> <span data-ttu-id="6e0b1-109">Kullanıcılara çok az cmdlet ve işleve erişim verilmesi, bunların işlerini almasını engelleyebilir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-109">Giving users access to too few cmdlets and functions can prevent them from getting their job done.</span></span> <span data-ttu-id="6e0b1-110">Çok fazla cmdlet ve işleve erişime izin verilmesi, kullanıcıların hedeflediğiniz ve güvenlik desteklemeyle yumuşyorundan daha fazla çalışmasına izin verebilir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-110">Allowing access to too many cmdlets and functions can allow users to do more than you intended and weaken your security stance.</span></span>

<span data-ttu-id="6e0b1-111">Bu işlem hakkında nasıl gittiğiniz, kuruluşunuza ve hedeflerinize göre değişir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-111">How you go about this process depends on your organization and goals.</span></span> <span data-ttu-id="6e0b1-112">Aşağıdaki ipuçları doğru yolda olduğunuzdan emin olmanıza yardımcı olabilir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-112">The following tips can help ensure you're on the right path.</span></span>

1. <span data-ttu-id="6e0b1-113">Kullanıcılarının işlerini yapmak için kullandığı komutları **belirler** .</span><span class="sxs-lookup"><span data-stu-id="6e0b1-113">**Identify** the commands users are using to get their jobs done.</span></span> <span data-ttu-id="6e0b1-114">Bu, BT personelini incelemek, Otomasyon betikleri denetlemek ya da PowerShell oturum dökümünü ve günlüklerini çözümlemek içerebilir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-114">This may involve surveying IT staff, checking automation scripts, or analyzing PowerShell session transcripts and logs.</span></span>
2. <span data-ttu-id="6e0b1-115">En iyi denetim ve JEA özelleştirme deneyimi için mümkün olduğunca, komut satırı araçlarının kullanımını PowerShell eşdeğerlerine **güncelleştirin** .</span><span class="sxs-lookup"><span data-stu-id="6e0b1-115">**Update** use of command-line tools to PowerShell equivalents, where possible, for the best auditing and JEA customization experience.</span></span> <span data-ttu-id="6e0b1-116">Dış programlar yerel PowerShell cmdlet 'leri ve JEA işlevleri olarak kısıtlanmış olarak kısıtlanamaz.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-116">External programs can't be constrained as granularly as native PowerShell cmdlets and functions in JEA.</span></span>
3. <span data-ttu-id="6e0b1-117">Cmdlet 'lerin kapsamını yalnızca belirli parametrelere veya parametre değerlerine izin verecek şekilde **kısıtlayın** .</span><span class="sxs-lookup"><span data-stu-id="6e0b1-117">**Restrict** the scope of the cmdlets to only allow specific parameters or parameter values.</span></span> <span data-ttu-id="6e0b1-118">Bu özellikle, kullanıcıların bir sistemin yalnızca bir bölümünü yönetmesi gereken durumlarda önemlidir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-118">This is especially important if users should manage only part of a system.</span></span>
4. <span data-ttu-id="6e0b1-119">JEA 'da kısıtlamak zor olan karmaşık komutları veya komutları değiştirmek için özel işlevler **oluşturun** .</span><span class="sxs-lookup"><span data-stu-id="6e0b1-119">**Create** custom functions to replace complex commands or commands that are difficult to constrain in JEA.</span></span> <span data-ttu-id="6e0b1-120">Karmaşık bir komutu sarmalayan veya ek doğrulama mantığı uygulayan basit bir işlev, Yöneticiler ve Son Kullanıcı basitliği için ek denetim sunabilir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-120">A simple function that wraps a complex command or applies additional validation logic can offer additional control for admins and end-user simplicity.</span></span>
5. <span data-ttu-id="6e0b1-121">Kullanıcılarınızın veya Otomasyon hizmetlerinize sahip izin verilen komutların kapsamlı listesini **Test** edin ve gereken şekilde ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-121">**Test** the scoped list of allowable commands with your users or automation services, and adjust as necessary.</span></span>

### <a name="examples-of-potentially-dangerous-commands"></a><span data-ttu-id="6e0b1-122">Tehlikeli olabilecek komutların örnekleri</span><span class="sxs-lookup"><span data-stu-id="6e0b1-122">Examples of potentially dangerous commands</span></span>

<span data-ttu-id="6e0b1-123">JEA uç noktasının, kullanıcının izinlerini yükseltmesine izin vermediğinden emin olmak için komutların dikkatli seçimi önemlidir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-123">Careful selection of commands is important to ensure the JEA endpoint doesn't allow the user to elevate their permissions.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="6e0b1-124">Bir JEA oturumunda Kullanıcı başarılı komutları için gereken önemli bilgiler genellikle yükseltilmiş ayrıcalıklarla çalıştırılır.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-124">Essential information required for user successCommands in a JEA session are often run with elevated privileges.</span></span>

<span data-ttu-id="6e0b1-125">Aşağıdaki tabloda, kısıtlanmış olmayan bir durumda izin verildiğinde kötü amaçlı olarak kullanılabilecek komutların örnekleri verilmiştir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-125">The following table contains examples of commands that can be used maliciously if allowed in an unconstrained state.</span></span> <span data-ttu-id="6e0b1-126">Bu kapsamlı bir liste değildir ve yalnızca bir uyarı başlangıç noktası olarak kullanılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-126">This isn't an exhaustive list and should only be used as a cautionary starting point.</span></span>

|                                            <span data-ttu-id="6e0b1-127">Risk</span><span class="sxs-lookup"><span data-stu-id="6e0b1-127">Risk</span></span>                                            |                                <span data-ttu-id="6e0b1-128">Örnek</span><span class="sxs-lookup"><span data-stu-id="6e0b1-128">Example</span></span>                                |                                                                              <span data-ttu-id="6e0b1-129">İlgili komutlar</span><span class="sxs-lookup"><span data-stu-id="6e0b1-129">Related commands</span></span>                                                                              |
| ------------------------------------------------------------------------------------------ | --------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <span data-ttu-id="6e0b1-130">JEA 'yı atlamak için bağlama Kullanıcı Yöneticisi ayrıcalıkları verme</span><span class="sxs-lookup"><span data-stu-id="6e0b1-130">Granting the connecting user admin privileges to bypass JEA</span></span>                                | `Add-LocalGroupMember -Member 'CONTOSO\jdoe' -Group 'Administrators'` | <span data-ttu-id="6e0b1-131">`Add-ADGroupMember`, `Add-LocalGroupMember`, `net.exe`, `dsadd.exe`</span><span class="sxs-lookup"><span data-stu-id="6e0b1-131">`Add-ADGroupMember`, `Add-LocalGroupMember`, `net.exe`, `dsadd.exe`</span></span>                                                                                                        |
| <span data-ttu-id="6e0b1-132">Korumaları atlamak için kötü amaçlı yazılım, güvenlik açıkları veya özel betikler gibi rastgele kod çalıştırma</span><span class="sxs-lookup"><span data-stu-id="6e0b1-132">Running arbitrary code, such as malware, exploits, or custom scripts to bypass protections</span></span> | `Start-Process -FilePath '\\san\share\malware.exe'`                   | <span data-ttu-id="6e0b1-133">`Start-Process`, `New-Service`, `Invoke-Item`, `Invoke-WmiMethod`, `Invoke-CimMethod`, `Invoke-Expression`, `Invoke-Command`, `New-ScheduledTask`, `Register-ScheduledJob`</span><span class="sxs-lookup"><span data-stu-id="6e0b1-133">`Start-Process`, `New-Service`, `Invoke-Item`, `Invoke-WmiMethod`, `Invoke-CimMethod`, `Invoke-Expression`, `Invoke-Command`, `New-ScheduledTask`, `Register-ScheduledJob`</span></span> |

## <a name="create-a-role-capability-file"></a><span data-ttu-id="6e0b1-134">Rol yetenek dosyası oluşturma</span><span class="sxs-lookup"><span data-stu-id="6e0b1-134">Create a role capability file</span></span>

<span data-ttu-id="6e0b1-135">[New-PSRoleCapabilityFile](/powershell/module/microsoft.powershell.core/new-psrolecapabilityfile?view=powershell-6) cmdlet 'ini kullanarak yeni bir PowerShell rol yetenek dosyası oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-135">You can create a new PowerShell role capability file with the [New-PSRoleCapabilityFile](/powershell/module/microsoft.powershell.core/new-psrolecapabilityfile?view=powershell-6) cmdlet.</span></span>

```powershell
New-PSRoleCapabilityFile -Path .\MyFirstJEARole.psrc
```

<span data-ttu-id="6e0b1-136">Rol için gerekli olan komutlara izin vermek için ortaya çıkan rol yetenek dosyası düzenlenmelidir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-136">The resulting role capability file should be edited to allow the commands required for the role.</span></span> <span data-ttu-id="6e0b1-137">PowerShell yardım belgeleri, dosyayı nasıl yapılandırabilmeniz için birkaç örnek içerir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-137">The PowerShell help documentation contains several examples of how you can configure the file.</span></span>

### <a name="allowing-powershell-cmdlets-and-functions"></a><span data-ttu-id="6e0b1-138">PowerShell cmdlet 'leri ve işlevlerine izin verme</span><span class="sxs-lookup"><span data-stu-id="6e0b1-138">Allowing PowerShell cmdlets and functions</span></span>

<span data-ttu-id="6e0b1-139">Kullanıcıların PowerShell cmdlet 'lerini veya işlevlerini çalıştırmasını yetkilendirmek için, cmdlet 'ini veya işlev adını Visiblecmdlet 'Ler veya VisibleFunctions alanlarına ekleyin.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-139">To authorize users to run PowerShell cmdlets or functions, add the cmdlet or function name to the VisibleCmdlets or VisibleFunctions fields.</span></span> <span data-ttu-id="6e0b1-140">Bir komutun bir cmdlet veya işlev olup olmadığından emin değilseniz, çıkışta `Get-Command <name>` **CommandType** özelliğini çalıştırabilir ve kontrol edebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-140">If you aren't sure whether a command is a cmdlet or function, you can run `Get-Command <name>` and check the **CommandType** property in the output.</span></span>

```powershell
VisibleCmdlets = 'Restart-Computer', 'Get-NetIPAddress'
```

<span data-ttu-id="6e0b1-141">Bazen belirli bir cmdlet veya işlevin kapsamı kullanıcılarınızın ihtiyaçlarına göre çok geniş olabilir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-141">Sometimes the scope of a specific cmdlet or function is too broad for your users' needs.</span></span> <span data-ttu-id="6e0b1-142">Örneğin, bir DNS Yöneticisi, genellikle DNS hizmetini yeniden başlatmak için erişime ihtiyaç duyuyor.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-142">A DNS admin, for example, probably only needs access to restart the DNS service.</span></span> <span data-ttu-id="6e0b1-143">Çok kiracılı ortamlarda kiracıların self servis yönetim araçlarına erişimi vardır.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-143">In multi-tenant environments, tenants have access to self-service management tools.</span></span> <span data-ttu-id="6e0b1-144">Kiracılar kendi kaynaklarını yönetmeye sınırlı olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-144">Tenants should be limited to managing their own resources.</span></span> <span data-ttu-id="6e0b1-145">Bu gibi durumlarda, cmdlet veya işlevden hangi parametrelerin açığa çıkarılabileceğini kısıtlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-145">For these cases, you can restrict which parameters are exposed from the cmdlet or function.</span></span>

```powershell
VisibleCmdlets = @{ Name = 'Restart-Computer'; Parameters = @{ Name = 'Name' }}
```

<span data-ttu-id="6e0b1-146">Daha Gelişmiş senaryolarda, bir kullanıcının bu parametrelerle kullanabileceği değerleri de kısıtlamanız gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-146">In more advanced scenarios, you may also need to restrict the values a user may use with these parameters.</span></span> <span data-ttu-id="6e0b1-147">Rol özellikleri, hangi girişe izin verileceğini belirleyen bir değer kümesi veya bir normal ifade deseninin tanımlamanızı sağlar.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-147">Role capabilities let you define a set of values or a regular expression pattern that determine what input is allowed.</span></span>

```powershell
VisibleCmdlets = @{ Name = 'Restart-Service'; Parameters = @{ Name = 'Name'; ValidateSet = 'Dns', 'Spooler' }},
                 @{ Name = 'Start-Website'; Parameters = @{ Name = 'Name'; ValidatePattern = 'HR_*' }}
```

> [!NOTE]
> <span data-ttu-id="6e0b1-148">Kullanılabilir parametreleri kısıtlasanız bile [ortak PowerShell parametrelerine](/powershell/module/microsoft.powershell.core/about/about_commonparameters) her zaman izin verilir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-148">The [common PowerShell parameters](/powershell/module/microsoft.powershell.core/about/about_commonparameters) are always allowed, even if you restrict the available parameters.</span></span>
> <span data-ttu-id="6e0b1-149">Parametreleri Parametreler alanında açıkça listememelisiniz.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-149">You should not explicitly list them in the Parameters field.</span></span>

<span data-ttu-id="6e0b1-150">Aşağıdaki tabloda, görünür bir cmdlet veya işlevi özelleştirmek için kullanabileceğiniz çeşitli yollar açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-150">The table below describes the various ways you can customize a visible cmdlet or function.</span></span>
<span data-ttu-id="6e0b1-151">**Visiblecmdlet 'ler** alanında aşağıdan birini karıştırarak ve eşleştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-151">You can mix and match any of the below in the **VisibleCmdlets** field.</span></span>

|                                           <span data-ttu-id="6e0b1-152">Örnek</span><span class="sxs-lookup"><span data-stu-id="6e0b1-152">Example</span></span>                                           |                                                             <span data-ttu-id="6e0b1-153">Kullanım örneği</span><span class="sxs-lookup"><span data-stu-id="6e0b1-153">Use case</span></span>                                                              |
| ------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------- |
| <span data-ttu-id="6e0b1-154">`'My-Func'` veya `@{ Name = 'My-Func' }`</span><span class="sxs-lookup"><span data-stu-id="6e0b1-154">`'My-Func'` or `@{ Name = 'My-Func' }`</span></span>                                                      | <span data-ttu-id="6e0b1-155">Kullanıcının parametreler üzerinde herhangi bir `My-Func` kısıtlama olmadan çalışmasına izin verir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-155">Allows the user to run `My-Func` without any restrictions on the parameters.</span></span>                                                      |
| `'MyModule\My-Func'`                                                                        | <span data-ttu-id="6e0b1-156">Kullanıcının parametrelerde kısıtlama olmadan modülden `My-Func` `MyModule` çalışmasına izin verir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-156">Allows the user to run `My-Func` from the module `MyModule` without any restrictions on the parameters.</span></span>                           |
| `'My-*'`                                                                                    | <span data-ttu-id="6e0b1-157">Kullanıcının fiil `My`ile herhangi bir cmdlet veya işlev çalıştırmasına izin verir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-157">Allows the user to run any cmdlet or function with the verb `My`.</span></span>                                                                 |
| `'*-Func'`                                                                                  | <span data-ttu-id="6e0b1-158">Kullanıcının ad `Func`ile herhangi bir cmdlet veya işlev çalıştırmasına izin verir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-158">Allows the user to run any cmdlet or function with the noun `Func`.</span></span>                                                               |
| `@{ Name = 'My-Func'; Parameters = @{ Name = 'Param1'}, @{ Name = 'Param2' }}`              | <span data-ttu-id="6e0b1-159">Kullanıcının `My-Func` `Param1` ve parametreleriyle`Param2` çalışmasına izin verir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-159">Allows the user to run `My-Func` with the `Param1` and `Param2` parameters.</span></span> <span data-ttu-id="6e0b1-160">Parametrelere herhangi bir değer sağlanabilir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-160">Any value can be supplied to the parameters.</span></span>          |
| `@{ Name = 'My-Func'; Parameters = @{ Name = 'Param1'; ValidateSet = 'Value1', 'Value2' }}` | <span data-ttu-id="6e0b1-161">Kullanıcının `My-Func` `Param1` parametresiyle çalışmasına izin verir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-161">Allows the user to run `My-Func` with the `Param1` parameter.</span></span> <span data-ttu-id="6e0b1-162">Parametreye yalnızca "değer1" ve "değer2" sağlanabilir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-162">Only "Value1" and "Value2" can be supplied to the parameter.</span></span>        |
| `@{ Name = 'My-Func'; Parameters = @{ Name = 'Param1'; ValidatePattern = 'contoso.*' }}`    | <span data-ttu-id="6e0b1-163">Kullanıcının `My-Func` `Param1` parametresiyle çalışmasına izin verir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-163">Allows the user to run `My-Func` with the `Param1` parameter.</span></span> <span data-ttu-id="6e0b1-164">"Contoso" ile başlayan herhangi bir değer parametreye sağlanabilir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-164">Any value starting with "contoso" can be supplied to the parameter.</span></span> |

> [!WARNING]
> <span data-ttu-id="6e0b1-165">En iyi güvenlik uygulamaları için, görünür cmdlet 'leri veya işlevleri tanımlarken joker karakter kullanılması önerilmez.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-165">For best security practices, it is not recommended to use wildcards when defining visible cmdlets or functions.</span></span> <span data-ttu-id="6e0b1-166">Bunun yerine, her bir güvenilir komutu, aynı adlandırma şemasını paylaşan başka komutların istenmeden yetkilendirilmesini sağlamak için açıkça listelemelidir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-166">Instead, you should explicitly list each trusted command to ensure no other commands that share the same naming scheme are unintentionally authorized.</span></span>

<span data-ttu-id="6e0b1-167">Aynı cmdlet veya işleve hem **ValidateModel** hem de **validateset** uygulayamazsınız.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-167">You can't apply both a **ValidatePattern** and **ValidateSet** to the same cmdlet or function.</span></span>

<span data-ttu-id="6e0b1-168">Bunu yaparsanız, **ValidateModel** **validateset**'i geçersiz kılar.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-168">If you do, the **ValidatePattern** overrides the **ValidateSet**.</span></span>

<span data-ttu-id="6e0b1-169">**ValidateModel**hakkında daha fazla bilgi Için [Bu Hey göz atın *, komut dosyası* ](https://devblogs.microsoft.com/scripting/validate-powershell-parameters-before-running-the-script/) işleme ve [PowerShell normal ifadeleri](/powershell/module/microsoft.powershell.core/about/about_regular_expressions) başvuru içeriği ' ne bakın.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-169">For more information about **ValidatePattern**, check out [this *Hey, Scripting Guy!* post](https://devblogs.microsoft.com/scripting/validate-powershell-parameters-before-running-the-script/) and the [PowerShell Regular Expressions](/powershell/module/microsoft.powershell.core/about/about_regular_expressions) reference content.</span></span>

### <a name="allowing-external-commands-and-powershell-scripts"></a><span data-ttu-id="6e0b1-170">Dış komutlara ve PowerShell betiklerine izin verme</span><span class="sxs-lookup"><span data-stu-id="6e0b1-170">Allowing external commands and PowerShell scripts</span></span>

<span data-ttu-id="6e0b1-171">Kullanıcıların bir JEA oturumunda yürütülebilir dosyaları ve PowerShell betikleri (. ps1) çalıştırmasına izin vermek için, **Visibleexternalcommands** alanındaki her bir programa tam yolu eklemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-171">To allow users to run executables and PowerShell scripts (.ps1) in a JEA session, you have to add the full path to each program in the **VisibleExternalCommands** field.</span></span>

```powershell
VisibleExternalCommands = 'C:\Windows\System32\whoami.exe', 'C:\Program Files\Contoso\Scripts\UpdateITSoftware.ps1'
```

<span data-ttu-id="6e0b1-172">Mümkün olduğunda, PowerShell cmdlet 'leri ve işlevleriyle izin verilen parametrelerin üzerinde denetiminiz olduğundan, yetkilendirdiğiniz herhangi bir dış yürütülebilir dosya için PowerShell cmdlet 'ini veya işlev eşlerini kullanmak için.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-172">Where possible, to use PowerShell cmdlet or function equivalents for any external executables you authorize since you have control over the parameters allowed with PowerShell cmdlets and functions.</span></span>

<span data-ttu-id="6e0b1-173">Birçok yürütülebilir dosya, geçerli durumu okumanızı ve sonra farklı parametreler sağlayarak değiştirmenizi sağlar.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-173">Many executables allow you to read the current state and then change it by providing different parameters.</span></span>

<span data-ttu-id="6e0b1-174">Örneğin, bir sistemde barındırılan ağ paylaşımlarını yöneten bir dosya sunucusu yöneticisinin rolünü göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-174">For example, consider the role of a file server admin that manages network shares hosted on a system.</span></span> <span data-ttu-id="6e0b1-175">Paylaşımları yönetmenin bir yolu kullanmaktır `net share`.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-175">One way of managing shares is to use `net share`.</span></span> <span data-ttu-id="6e0b1-176">Ancak, Kullanıcı ile `net group Administrators unprivilegedjeauser /add`yönetici ayrıcalıkları kazanmak için komutunu kullanabilmesi nedeniyle **net. exe** ' ye izin veriliyor.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-176">However, allowing **net.exe** is dangerous because the user could use the command to gain admin privileges with `net group Administrators unprivilegedjeauser /add`.</span></span> <span data-ttu-id="6e0b1-177">Daha güvenli bir seçenek, [Get-SmbShare](/powershell/module/smbshare/get-smbshare)öğesine izin vermek, aynı sonucu elde etmek, ancak daha sınırlı bir kapsama sahiptir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-177">A more secure option is to allow [Get-SmbShare](/powershell/module/smbshare/get-smbshare), which achieves the same result but has a much more limited scope.</span></span>

<span data-ttu-id="6e0b1-178">Dış komutları bir JEA oturumunda kullanıcılara kullanılabilir hale getirmek için her zaman yürütülebilir dosyanın tüm yolunu belirtin.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-178">When making external commands available to users in a JEA session, always specify the complete path to the executable.</span></span> <span data-ttu-id="6e0b1-179">Bu, sistemde başka bir yerde bulunan benzer adlandırılmış ve olası kötü amaçlı programların yürütülmesini önler.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-179">This prevents the execution of similarly named and potentially malicious programs located elsewhere on the system.</span></span>

### <a name="allowing-access-to-powershell-providers"></a><span data-ttu-id="6e0b1-180">PowerShell sağlayıcılarına erişime izin verme</span><span class="sxs-lookup"><span data-stu-id="6e0b1-180">Allowing access to PowerShell providers</span></span>

<span data-ttu-id="6e0b1-181">Varsayılan olarak, JEA oturumlarında kullanılabilir PowerShell sağlayıcısı yoktur.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-181">By default, no PowerShell providers are available in JEA sessions.</span></span> <span data-ttu-id="6e0b1-182">Bu, bağlanan kullanıcıya bildirilen hassas bilgiler ve yapılandırma ayarları riskini azaltır.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-182">This reduces the risk of sensitive information and configuration settings being disclosed to the connecting user.</span></span>

<span data-ttu-id="6e0b1-183">Gerektiğinde, `VisibleProviders` komutunu kullanarak PowerShell sağlayıcılarına erişime izin verebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-183">When necessary, you can allow access to the PowerShell providers using the `VisibleProviders` command.</span></span> <span data-ttu-id="6e0b1-184">Sağlayıcıların tam listesi için çalıştırın `Get-PSProvider`.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-184">For a full list of providers, run `Get-PSProvider`.</span></span>

```powershell
VisibleProviders = 'Registry'
```

<span data-ttu-id="6e0b1-185">Dosya sistemine, kayıt defterine, sertifika deposuna veya diğer hassas sağlayıcılara erişim gerektiren basit görevler için Kullanıcı adına sağlayıcıyla birlikte çalışarak özel bir işlev yazmayı düşünün.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-185">For simple tasks that require access to the file system, registry, certificate store, or other sensitive providers, consider writing a custom function that works with the provider on the user's behalf.</span></span> <span data-ttu-id="6e0b1-186">JEA oturumunda bulunan işlevler, cmdlet 'ler ve dış programlar, JEA ile aynı kısıtlamalara tabi değildir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-186">The functions, cmdlets, and external programs available in a JEA session aren't subject to the same constraints as JEA.</span></span> <span data-ttu-id="6e0b1-187">Varsayılan olarak herhangi bir sağlayıcıya erişebilirler.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-187">They can access any provider by default.</span></span> <span data-ttu-id="6e0b1-188">Ayrıca, bir JEA uç noktasından veya bu uç noktadan dosya kopyalarken [Kullanıcı sürücüsünü](session-configurations.md#user-drive) kullanmayı göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-188">Also consider using the [user drive](session-configurations.md#user-drive) when copying files to or from a JEA endpoint is required.</span></span>

### <a name="creating-custom-functions"></a><span data-ttu-id="6e0b1-189">Özel işlevler oluşturma</span><span class="sxs-lookup"><span data-stu-id="6e0b1-189">Creating custom functions</span></span>

<span data-ttu-id="6e0b1-190">Son kullanıcılarınız için karmaşık görevleri basitleştirecek bir rol yetenek dosyasında özel işlevler yazabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-190">You can author custom functions in a role capability file to simplify complex tasks for your end users.</span></span> <span data-ttu-id="6e0b1-191">Cmdlet parametre değerleri için gelişmiş doğrulama mantığına ihtiyacınız olduğunda özel işlevler de kullanışlıdır.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-191">Custom functions are also useful when you require advanced validation logic for cmdlet parameter values.</span></span> <span data-ttu-id="6e0b1-192">**FunctionDefinitions** alanında basit işlevler yazabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="6e0b1-192">You can write simple functions in the **FunctionDefinitions** field:</span></span>

```powershell
VisibleFunctions = 'Get-TopProcess'

FunctionDefinitions = @{
    Name = 'Get-TopProcess'

    ScriptBlock = {
        param($Count = 10)

        Get-Process | Sort-Object -Property CPU -Descending |
            Microsoft.PowerShell.Utility\Select-Object -First $Count
    }
}
```

> [!IMPORTANT]
> <span data-ttu-id="6e0b1-193">Özel işlevlerinizin adını, JEA kullanıcıları tarafından çalıştırılabilmeleri için **visiblefunctions** alanına eklemeyi unutmayın.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-193">Don't forget to add the name of your custom functions to the **VisibleFunctions** field so they can be run by the JEA users.</span></span>

<span data-ttu-id="6e0b1-194">Özel işlevlerin gövdesi (betik bloğu) sistem için varsayılan dil modunda çalışır ve JEA 'nın dil kısıtlamalarına tabi değildir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-194">The body (script block) of custom functions runs in the default language mode for the system and isn't subject to JEA's language constraints.</span></span> <span data-ttu-id="6e0b1-195">Bu, işlevlerin dosya sistemine ve kayıt defterine erişebileceği ve rol yetenek dosyasında görünür olmayan komutları çalıştırabileceği anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-195">This means that functions can access the file system and registry, and run commands that weren't made visible in the role capability file.</span></span> <span data-ttu-id="6e0b1-196">Parametreleri kullanırken rastgele kod çalıştırmadan kaçınmak için dikkatli olmanız.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-196">Take care to avoid running arbitrary code when using parameters.</span></span> <span data-ttu-id="6e0b1-197">Kullanıcı girişini, gibi `Invoke-Expression`cmdlet 'lere doğrudan yönelmekten kaçının.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-197">Avoid piping user input directly into cmdlets like `Invoke-Expression`.</span></span>

<span data-ttu-id="6e0b1-198">Yukarıdaki örnekte, tam modül adının (FQMN) `Microsoft.PowerShell.Utility\Select-Object` toplu `Select-Object`değer yerine kullanıldığını fark edersiniz.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-198">In the above example, notice that the fully qualified module name (FQMN) `Microsoft.PowerShell.Utility\Select-Object` was used instead of the shorthand `Select-Object`.</span></span>
<span data-ttu-id="6e0b1-199">Rol yetenek dosyalarında tanımlanan işlevler, var olan komutları kısıtlamak için JEA tarafından oluşturulan ara sunucu işlevlerini de içeren JEA oturumlarının kapsamına tabidir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-199">Functions defined in role capability files are still subject to the scope of JEA sessions, which includes the proxy functions JEA creates to constrain existing commands.</span></span>

<span data-ttu-id="6e0b1-200">Varsayılan olarak, `Select-Object` nesneleri üzerinde rastgele Özellikler seçimine izin veren tüm Jea oturumlarında kısıtlanmış bir cmdlet 'dir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-200">By default, `Select-Object` is a constrained cmdlet in all JEA sessions that doesn't allow the selection of arbitrary properties on objects.</span></span> <span data-ttu-id="6e0b1-201">Kısıtlanmış `Select-Object` olmayan işlevleri kullanmak için, FQMN kullanarak tam uygulamayı açıkça istemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-201">To use the unconstrained `Select-Object` in functions, you must explicitly request the full implementation using the FQMN.</span></span> <span data-ttu-id="6e0b1-202">Bir JEA oturumunda kısıtlanmış cmdlet, bir işlevden çağrıldığında aynı kısıtlamalara sahiptir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-202">Any constrained cmdlet in a JEA session has the same constraints when invoked from a function.</span></span> <span data-ttu-id="6e0b1-203">Daha fazla bilgi için bkz. [about_Command_Precedence](/powershell/module/microsoft.powershell.core/about/about_command_precedence).</span><span class="sxs-lookup"><span data-stu-id="6e0b1-203">For more information, see [about_Command_Precedence](/powershell/module/microsoft.powershell.core/about/about_command_precedence).</span></span>

<span data-ttu-id="6e0b1-204">Birkaç özel işlev yazıyorsanız, bunları bir PowerShell betik modülüne koymak daha uygundur.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-204">If you're writing several custom functions, it's more convenient to put them in a PowerShell script module.</span></span> <span data-ttu-id="6e0b1-205">Bu işlevleri, yerleşik ve üçüncü taraf modülleriyle yaptığınız gibi **visiblefunctions** alanını kullanarak Jea oturumunda görünür hale getirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-205">You make those functions visible in the JEA session using the **VisibleFunctions** field like you would with built-in and third-party modules.</span></span>

<span data-ttu-id="6e0b1-206">Sekme tamamlama işleminin Jea oturumlarında düzgün çalışması için, `tabexpansion2` **visiblefunctions** listesine yerleşik işlevi eklemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-206">For tab completion to work properly in JEA sessions you must include the built-in function `tabexpansion2` in the **VisibleFunctions** list.</span></span>

## <a name="place-role-capabilities-in-a-module"></a><span data-ttu-id="6e0b1-207">Rol yeteneklerini bir modüle yerleştirme</span><span class="sxs-lookup"><span data-stu-id="6e0b1-207">Place role capabilities in a module</span></span>

<span data-ttu-id="6e0b1-208">PowerShell 'in bir rol yetenek dosyası bulması için, PowerShell modülündeki bir **Rolecapabilities** klasöründe depolanması gerekir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-208">In order for PowerShell to find a role capability file, it must be stored in a **RoleCapabilities** folder in a PowerShell module.</span></span> <span data-ttu-id="6e0b1-209">Modül, `$env:PSModulePath` ortam değişkeninde yer alan herhangi bir klasörde depolanabilir, ancak bunu system32 içine veya güvenilmeyen, bağlanan kullanıcıların dosyaları değiştirebilecekleri bir klasöre yerleştirmemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-209">The module can be stored in any folder included in the `$env:PSModulePath` environment variable, however you shouldn't place it in System32 or a folder where the untrusted, connecting users could modify the files.</span></span> <span data-ttu-id="6e0b1-210">Aşağıda, `$env:ProgramFiles` yolda **contosojea** adlı temel bir PowerShell betik modülünün oluşturulmasına ilişkin bir örnek verilmiştir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-210">Below is an example of creating a basic PowerShell script module called **ContosoJEA** in the `$env:ProgramFiles` path.</span></span>

```powershell
# Create a folder for the module
$modulePath = Join-Path $env:ProgramFiles "WindowsPowerShell\Modules\ContosoJEA"
New-Item -ItemType Directory -Path $modulePath

# Create an empty script module and module manifest.
# At least one file in the module folder must have the same name as the folder itself.
New-Item -ItemType File -Path (Join-Path $modulePath "ContosoJEAFunctions.psm1")
New-ModuleManifest -Path (Join-Path $modulePath "ContosoJEA.psd1") -RootModule "ContosoJEAFunctions.psm1"

# Create the RoleCapabilities folder and copy in the PSRC file
$rcFolder = Join-Path $modulePath "RoleCapabilities"
New-Item -ItemType Directory $rcFolder
Copy-Item -Path .\MyFirstJEARole.psrc -Destination $rcFolder
```

<span data-ttu-id="6e0b1-211">PowerShell modülleri hakkında daha fazla bilgi için bkz. [PowerShell modülünü anlama](/powershell/developer/windows-powershell).</span><span class="sxs-lookup"><span data-stu-id="6e0b1-211">For more information about PowerShell modules, see [Understanding a PowerShell Module](/powershell/developer/windows-powershell).</span></span>

## <a name="updating-role-capabilities"></a><span data-ttu-id="6e0b1-212">Rol özellikleri güncelleştiriliyor</span><span class="sxs-lookup"><span data-stu-id="6e0b1-212">Updating role capabilities</span></span>

<span data-ttu-id="6e0b1-213">Ayarları dilediğiniz zaman güncelleştirmek için rol yetenek dosyasını düzenleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-213">You can edit a role capability file to update the settings at any time.</span></span> <span data-ttu-id="6e0b1-214">Rol özelliği güncelleştirildikten sonra başlatılan yeni JEA oturumları, düzeltilen özellikleri yansıtır.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-214">Any new JEA sessions started after the role capability has been updated will reflect the revised capabilities.</span></span>

<span data-ttu-id="6e0b1-215">Bu, rol yetenekleri klasörüne erişimin denetlenmesi için önemlidir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-215">This is why controlling access to the role capabilities folder is so important.</span></span> <span data-ttu-id="6e0b1-216">Rol yetenek dosyalarını yalnızca son derece güvenilen yöneticilerin değiştirmesine izin verilmelidir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-216">Only highly trusted administrators should be allowed to change role capability files.</span></span> <span data-ttu-id="6e0b1-217">Güvenilmeyen bir Kullanıcı rol yetenek dosyalarını değiştirebiliyorsanız, kendilerine kendi ayrıcalıklarını yükseltmesine izin veren cmdlet 'lere kolayca erişim izni verebilir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-217">If an untrusted user can change role capability files, they can easily give themselves access to cmdlets that allow them to elevate their privileges.</span></span>

<span data-ttu-id="6e0b1-218">Rol yeteneklerine erişimi kilitlemek isteyen yöneticiler için, yerel sistemin rol yetenek dosyalarına ve modülleri içeren okuma erişimine sahip olduğundan emin olun.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-218">For administrators looking to lock down access to the role capabilities, ensure Local System has read access to the role capability files and containing modules.</span></span>

## <a name="how-role-capabilities-are-merged"></a><span data-ttu-id="6e0b1-219">Rol özellikleri nasıl birleştirilir</span><span class="sxs-lookup"><span data-stu-id="6e0b1-219">How role capabilities are merged</span></span>

<span data-ttu-id="6e0b1-220">Kullanıcılara bir JEA oturumu girdiklerinde [oturum yapılandırma dosyasındaki](session-configurations.md) tüm eşleşen rol özelliklerine erişim verilir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-220">Users are granted access to all matching role capabilities in the [session configuration file](session-configurations.md) when they enter a JEA session.</span></span> <span data-ttu-id="6e0b1-221">JEA, kullanıcıya rollerden herhangi biri tarafından izin verilen en fazla sayıda komuta izin vermesini sağlamaya çalışır.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-221">JEA tries to give the user the most permissive set of commands allowed by any of the roles.</span></span>

### <a name="visiblecmdlets-and-visiblefunctions"></a><span data-ttu-id="6e0b1-222">Visiblecmdlet 'ler ve VisibleFunctions</span><span class="sxs-lookup"><span data-stu-id="6e0b1-222">VisibleCmdlets and VisibleFunctions</span></span>

<span data-ttu-id="6e0b1-223">En karmaşık birleştirme mantığı, parametreleri ve parametre değerlerini JEA 'da sınırlı olabilecek cmdlet 'leri ve işlevleri etkiler.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-223">The most complex merge logic affects cmdlets and functions, which can have their parameters and parameter values limited in JEA.</span></span>

<span data-ttu-id="6e0b1-224">Kurallar aşağıdaki gibidir:</span><span class="sxs-lookup"><span data-stu-id="6e0b1-224">The rules are as follows:</span></span>

1. <span data-ttu-id="6e0b1-225">Bir cmdlet yalnızca bir rolde görünür durumdaysa, geçerli parametre kısıtlamalarına sahip kullanıcı tarafından görülebilir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-225">If a cmdlet is only made visible in one role, it is visible to the user with any applicable parameter constraints.</span></span>
2. <span data-ttu-id="6e0b1-226">Bir cmdlet birden fazla rolde görünür hale getiril, ve her rolün Cmdlet 'inde aynı kısıtlamalara sahip olması durumunda, cmdlet bu kısıtlamalara sahip kullanıcı tarafından görülebilir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-226">If a cmdlet is made visible in more than one role, and each role has the same constraints on the cmdlet, the cmdlet is visible to the user with those constraints.</span></span>
3. <span data-ttu-id="6e0b1-227">Bir cmdlet birden fazla rolde görünür hale getirilme ve her bir rol farklı bir parametre kümesine izin veriyorsa, cmdlet ve her rol için tanımlanan tüm parametreler kullanıcıya görünür.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-227">If a cmdlet is made visible in more than one role, and each role allows a different set of parameters, the cmdlet and all the parameters defined across every role are visible to the user.</span></span>
   <span data-ttu-id="6e0b1-228">Bir rolün parametreler üzerinde kısıtlamaları yoksa, tüm parametrelere izin verilir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-228">If one role doesn't have constraints on the parameters, all parameters are allowed.</span></span>
4. <span data-ttu-id="6e0b1-229">Bir rol bir cmdlet parametresi için bir doğrulama kümesi veya doğrulama modelini tanımlıyorsa ve diğer rol parametreye izin veriyorsa ancak parametre değerlerini kısıtlamaz, doğrulama kümesi veya kalıp yok sayılır.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-229">If one role defines a validate set or validate pattern for a cmdlet parameter, and the other role allows the parameter but does not constrain the parameter values, the validate set or pattern is ignored.</span></span>
5. <span data-ttu-id="6e0b1-230">Bir doğrulama kümesi birden fazla rolde aynı cmdlet parametresi için tanımlandıysa, tüm doğrulama kümelerindeki tüm değerlere izin verilir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-230">If a validate set is defined for the same cmdlet parameter in more than one role, all values from all validate sets are allowed.</span></span>
6. <span data-ttu-id="6e0b1-231">Bir doğrulama deseni birden fazla rolde aynı cmdlet parametresi için tanımlanmışsa, desenlerden biriyle eşleşen herhangi bir değere izin verilir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-231">If a validate pattern is defined for the same cmdlet parameter in more than one role, any values that match any of the patterns are allowed.</span></span>
7. <span data-ttu-id="6e0b1-232">Doğrulama kümesi bir veya daha fazla rolde tanımlanmışsa ve bir doğrulama deseni aynı cmdlet parametresi için başka bir rolde tanımlanmışsa, doğrulama kümesi yok sayılır ve kural (6) kalan doğrulama desenleri için geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-232">If a validate set is defined in one or more roles, and a validate pattern is defined in another role for the same cmdlet parameter, the validate set is ignored and rule (6) applies to the remaining validate patterns.</span></span>

<span data-ttu-id="6e0b1-233">Rollerin bu kurallara göre nasıl birleştirildiğini gösteren bir örnek aşağıda verilmiştir:</span><span class="sxs-lookup"><span data-stu-id="6e0b1-233">Below is an example of how roles are merged according to these rules:</span></span>

```powershell
# Role A Visible Cmdlets
$roleA = @{
    VisibleCmdlets = 'Get-Service',
                     @{ Name = 'Restart-Service';
                        Parameters = @{ Name = 'DisplayName'; ValidateSet = 'DNS Client' } }
}

# Role B Visible Cmdlets
$roleB = @{
    VisibleCmdlets = @{ Name = 'Get-Service';
                        Parameters = @{ Name = 'DisplayName'; ValidatePattern = 'DNS.*' } },
                     @{ Name = 'Restart-Service';
                        Parameters = @{ Name = 'DisplayName'; ValidateSet = 'DNS Server' } }
}

# Resulting permissions for a user who belongs to both role A and B
# - The constraint in role B for the DisplayName parameter on Get-Service
#   is ignored because of rule #4
# - The ValidateSets for Restart-Service are merged because both roles use
#   ValidateSet on the same parameter per rule #5
$mergedAandB = @{
    VisibleCmdlets = 'Get-Service',
                     @{ Name = 'Restart-Service';
                        Parameters = @{ Name = 'DisplayName'; ValidateSet = 'DNS Client', 'DNS Server' } }
}
```

### <a name="visibleexternalcommands-visiblealiases-visibleproviders-scriptstoprocess"></a><span data-ttu-id="6e0b1-234">VisibleExternalCommands, Visibleadlarla, VisibleProviders, ScriptsToProcess</span><span class="sxs-lookup"><span data-stu-id="6e0b1-234">VisibleExternalCommands, VisibleAliases, VisibleProviders, ScriptsToProcess</span></span>

<span data-ttu-id="6e0b1-235">Rol yetenek dosyasındaki diğer tüm alanlar, bir dizi izin verilen dış komutlara, diğer adlara, sağlayıcılara ve başlangıç betiklerine eklenir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-235">All other fields in the role capability file are added to a cumulative set of allowable external commands, aliases, providers, and startup scripts.</span></span> <span data-ttu-id="6e0b1-236">Tek bir rol özelliği ile kullanılabilen herhangi bir komut, diğer ad, sağlayıcı veya komut dosyası JEA kullanıcısı tarafından kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-236">Any command, alias, provider, or script available in one role capability is available to the JEA user.</span></span>

<span data-ttu-id="6e0b1-237">Bir rol yeteneğinin ve cmdlet 'lerden/işlevlerden/komutlardan oluşan Birleşik sağlayıcıların sistem kaynaklarına yanlışlıkla erişmesini izin vermediği konusunda dikkatli olun.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-237">Be careful to ensure that the combined set of providers from one role capability and cmdlets/functions/commands from another don't allow users unintentional access to system resources.</span></span>
<span data-ttu-id="6e0b1-238">Örneğin, bir rol `Remove-Item` cmdlet 'e izin veriyorsa ve başka bir `FileSystem` sağlayıcıya izin veriyorsa, bilgisayarınızda rastgele dosyaları silen bir Jea kullanıcısı riski vardır.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-238">For example, if one role allows the `Remove-Item` cmdlet and another allows the `FileSystem` provider, you are at risk of a JEA user deleting arbitrary files on your computer.</span></span> <span data-ttu-id="6e0b1-239">Kullanıcıların etkili izinlerini tanımlama hakkında ek bilgi, [JEA makalesinde denetim](audit-and-report.md) altında bulunabilir.</span><span class="sxs-lookup"><span data-stu-id="6e0b1-239">Additional information about identifying users' effective permissions can be found in the [auditing JEA](audit-and-report.md) article.</span></span>

## <a name="next-steps"></a><span data-ttu-id="6e0b1-240">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="6e0b1-240">Next steps</span></span>

[<span data-ttu-id="6e0b1-241">Oturum yapılandırma dosyası oluşturma</span><span class="sxs-lookup"><span data-stu-id="6e0b1-241">Create a session configuration file</span></span>](session-configurations.md)
