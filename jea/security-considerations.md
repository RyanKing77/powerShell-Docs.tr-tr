---
ms.date: 2017-06-12
author: rpsqrd
ms.topic: conceptual
keywords: "jea, powershell, güvenlik"
title: "JEA güvenlik konuları"
ms.openlocfilehash: 69bbe50fb1a7580c32d657a0f084cc80c28825c7
ms.sourcegitcommit: 99227f62dcf827354770eb2c3e95c5cf6a3118b4
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/15/2018
---
# <a name="jea-security-considerations"></a><span data-ttu-id="53cb9-103">JEA güvenlik konuları</span><span class="sxs-lookup"><span data-stu-id="53cb9-103">JEA Security Considerations</span></span>

> <span data-ttu-id="53cb9-104">Uygulandığı öğe: Windows PowerShell 5.0</span><span class="sxs-lookup"><span data-stu-id="53cb9-104">Applies to: Windows PowerShell 5.0</span></span>

<span data-ttu-id="53cb9-105">JEA, güvenlikle ilgili tutumunuzu makinelerinizi kalıcı Yöneticiler sayısını azaltarak artırılmasına yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="53cb9-105">JEA helps you improve your security posture by reducing the number of permanent administrators on your machines.</span></span>
<span data-ttu-id="53cb9-106">Bunu kullanıcıların sıkı bir şekilde kötüye kullanımı önlemek için varsayılan olarak kilitlenmiştir (bir PowerShell oturum yapılandırması) sistemini yönetmek yeni bir giriş noktası oluşturarak yapar.</span><span class="sxs-lookup"><span data-stu-id="53cb9-106">It does so by creating a new entry point for users to manage the system (a PowerShell session configuration) which is tightly locked down by default to prevent misuse.</span></span>
<span data-ttu-id="53cb9-107">Bazı, gereken ancak kullanıcılar sınırsız, yönetim görevlerini gerçekleştirmek için makine erişim JEA uç noktasına erişim izni.</span><span class="sxs-lookup"><span data-stu-id="53cb9-107">Users who need some, but not unlimited, access to the machine to perform administrative tasks can be granted access to the JEA endpoint.</span></span>
<span data-ttu-id="53cb9-108">JEA bunları yönetici erişimi zorunda kalmadan doğrudan yönetim komutları çalıştırmak izin verdiğinden, sonra (standart kullanıcılar olmalarını) yüksek ayrıcalıklı güvenlik gruplarındaki kullanıcılar kaldırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="53cb9-108">Because JEA allows them to run admin commands without directly having admin access, you can then remove those users from highly privileged security groups (make them standard users).</span></span>

<span data-ttu-id="53cb9-109">Bu konuda daha ayrıntılı en iyi yöntemler ve JEA güvenlik modeli açıklanır.</span><span class="sxs-lookup"><span data-stu-id="53cb9-109">This topic describes the JEA security model and best practices in more detail.</span></span>

## <a name="run-as-account"></a><span data-ttu-id="53cb9-110">Farklı Çalıştır hesabı</span><span class="sxs-lookup"><span data-stu-id="53cb9-110">Run As account</span></span>

<span data-ttu-id="53cb9-111">Her JEA bitiş altında bağlanan kullanıcının Eylemler gerçekleştirileceği hesabı olan bir belirlenen "Farklı Çalıştır" hesabı vardır.</span><span class="sxs-lookup"><span data-stu-id="53cb9-111">Each JEA endpoint has a designated "run as" account, which is the account under which the connecting user's actions are performed.</span></span>
<span data-ttu-id="53cb9-112">Bu hesap olarak yapılandırılabilir, [oturum yapılandırma dosyası](session-configurations.md), ve seçtiğiniz hesap uç noktanızı güvenlik üzerinde önemli bir şifrelemeyle sahiptir.</span><span class="sxs-lookup"><span data-stu-id="53cb9-112">This account is configurable in the [session configuration file](session-configurations.md), and the account you choose has a significant bearing on the security of your endpoint.</span></span>

<span data-ttu-id="53cb9-113">**Sanal hesaplar** run hesabıyla yapılandırma için önerilen yoldur.</span><span class="sxs-lookup"><span data-stu-id="53cb9-113">**Virtual accounts** are the recommended way of configuring the run as account.</span></span>
<span data-ttu-id="53cb9-114">JEA oturumuna süresi sırasında kullanılacak bağlanan kullanıcı için oluşturulan tek seferlik, geçici yerel hesaplar sanal hesaplarıdır.</span><span class="sxs-lookup"><span data-stu-id="53cb9-114">Virtual accounts are one-time, temporary local accounts that are created for the connecting user to use during the duration of their JEA session.</span></span>
<span data-ttu-id="53cb9-115">Kullanıcıların oturumlarını sona hemen sanal hesap yok edilmesi ve artık kullanılamaz.</span><span class="sxs-lookup"><span data-stu-id="53cb9-115">As soon as their session is terminated, the virtual account will be destroyed and cannot be used anymore.</span></span>
<span data-ttu-id="53cb9-116">Bağlanan kullanıcı hesabının kimlik bilgilerini sanal bilmez ve sanal hesap Uzak Masaüstü veya bir Kısıtlanmamış PowerShell uç nokta gibi diğer yollarla üzerinden erişmek için kullanılamaz.</span><span class="sxs-lookup"><span data-stu-id="53cb9-116">The connecting user does not know the credentials for the virtual account and cannot use the virtual account to access the system via other means, such as Remote Desktop or an unconstrained PowerShell endpoint.</span></span>

<span data-ttu-id="53cb9-117">Varsayılan olarak, sanal hesaplar makinede yerel Yöneticiler grubuna ait.</span><span class="sxs-lookup"><span data-stu-id="53cb9-117">By default, virtual accounts belong to the local administrators group on the machine.</span></span>
<span data-ttu-id="53cb9-118">Bu bunları sistemde herhangi bir şey yönetmek için tüm haklara, ancak ağ kaynaklarını yönetme hakkı verir.</span><span class="sxs-lookup"><span data-stu-id="53cb9-118">This gives them full rights to manage anything on the system, but no rights to manage resources on the network.</span></span>
<span data-ttu-id="53cb9-119">Diğer makinelerle kimlik doğrulamasını yaparken, kullanıcı bağlamı, yerel bilgisayar hesabının, sanal hesap olacaktır.</span><span class="sxs-lookup"><span data-stu-id="53cb9-119">When authenticating with other machines, the user context will be that of the local computer account, not the virtual account.</span></span>

<span data-ttu-id="53cb9-120">Yerel Yöneticiler grubunun kavramına olduğundan etki alanı denetleyicileri bir özel durum etkilenir.</span><span class="sxs-lookup"><span data-stu-id="53cb9-120">Domain controllers are a special case since there is no concept of a local administrators group.</span></span>
<span data-ttu-id="53cb9-121">Bunun yerine, sanal hesaplar etki alanı yöneticileri için bunun yerine ait ve etki alanı denetleyicisindeki Dizin Hizmetleri yönetebilir.</span><span class="sxs-lookup"><span data-stu-id="53cb9-121">Instead, virtual accounts belong to Domain Admins instead and can manage the directory services on the domain controller.</span></span>
<span data-ttu-id="53cb9-122">Etki alanı kimliği burada JEA oturum örneğinin başlatılmasından ve herhangi bir ağ erişim etki alanı denetleyicisi bilgisayar nesnesinden yerine gelen görünür etki alanı denetleyicisinde kullanmak için hala sınırlıdır.</span><span class="sxs-lookup"><span data-stu-id="53cb9-122">The domain identity is still restricted to use on the domain controller where the JEA session was instantiated, and any network access will appear to come from the domain controller computer object instead.</span></span>

<span data-ttu-id="53cb9-123">Her iki durumda da, açıkça sanal ait olması hangi güvenlik gruplarının tanımlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="53cb9-123">In both cases, you can also explicitly define which security groups the virtual account should belong to.</span></span>
<span data-ttu-id="53cb9-124">Gerçekleştirmekte olduğunuz görev yerel/etki alanı yönetici ayrıcalıklarına yapılabilir olduğunda iyi bir uygulamadır.</span><span class="sxs-lookup"><span data-stu-id="53cb9-124">This is a good practice when the task you are performing can be done without local/domain admin privileges.</span></span>
<span data-ttu-id="53cb9-125">Yöneticiler için tanımlanmış bir güvenlik grubu zaten varsa, yalnızca gerekli izinleri vermek için bu gruba sanal hesap için üyelik verebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="53cb9-125">If you already have a security group defined for your admins, you can simply grant the virtual account membership to that group to give it the permissions it needs.</span></span>
<span data-ttu-id="53cb9-126">Sanal Hesap Grup üyeliği iş istasyonu ve üye sunuculara yerel güvenlik grupları sınırlıdır, ancak bir etki alanı denetleyicisinde bunlar yalnızca etki alanı güvenlik gruplarının üyesi olabilir.</span><span class="sxs-lookup"><span data-stu-id="53cb9-126">Virtual account group membership is limited to local security groups on workstation and member servers, but on a domain controller they can only be members of domain security groups.</span></span>
<span data-ttu-id="53cb9-127">Ait bir veya daha fazla güvenlik grupları için sanal hesap belirttiğinizde, artık (yerel yönetici veya etki alanı yöneticisi) varsayılan gruplara ait.</span><span class="sxs-lookup"><span data-stu-id="53cb9-127">Once you specify one or more security groups for the virtual account to belong to, it will no longer belong to the default groups (local admin or domain admin).</span></span>

<span data-ttu-id="53cb9-128">Sonuçta elde edilen sanal hesapların izinlerini ve olası yapılandırma seçenekleri aşağıdaki tabloda özetlenmiştir</span><span class="sxs-lookup"><span data-stu-id="53cb9-128">The table below summarizes the possible configuration options and resulting permissions for virtual accounts</span></span>

<span data-ttu-id="53cb9-129">Bilgisayar türü</span><span class="sxs-lookup"><span data-stu-id="53cb9-129">Computer type</span></span>                | <span data-ttu-id="53cb9-130">Sanal hesap grubu yapılandırması</span><span class="sxs-lookup"><span data-stu-id="53cb9-130">Virtual account group configuration</span></span> | <span data-ttu-id="53cb9-131">Yerel kullanıcı bağlamı</span><span class="sxs-lookup"><span data-stu-id="53cb9-131">Local user context</span></span>                                      | <span data-ttu-id="53cb9-132">Ağ kullanıcı bağlamı</span><span class="sxs-lookup"><span data-stu-id="53cb9-132">Network user context</span></span>
-----------------------------|-------------------------------------|---------------------------------------------------------|--------------------------------------------------
<span data-ttu-id="53cb9-133">Etki alanı denetleyicisi</span><span class="sxs-lookup"><span data-stu-id="53cb9-133">Domain controller</span></span>            | <span data-ttu-id="53cb9-134">Varsayılan</span><span class="sxs-lookup"><span data-stu-id="53cb9-134">Default</span></span>                             | <span data-ttu-id="53cb9-135">Etki alanı kullanıcısı, üyesi '*etki alanı*\Domain Admins'</span><span class="sxs-lookup"><span data-stu-id="53cb9-135">Domain user, member of '*DOMAIN*\Domain Admins'</span></span>         | <span data-ttu-id="53cb9-136">Bilgisayar hesabı</span><span class="sxs-lookup"><span data-stu-id="53cb9-136">Computer account</span></span>
<span data-ttu-id="53cb9-137">Etki alanı denetleyicisi</span><span class="sxs-lookup"><span data-stu-id="53cb9-137">Domain controller</span></span>            | <span data-ttu-id="53cb9-138">Etki alanı gruplarını A ve B</span><span class="sxs-lookup"><span data-stu-id="53cb9-138">Domain groups A and B</span></span>               | <span data-ttu-id="53cb9-139">Etki alanı kullanıcısı, üyesi '*etki alanı*\A ','*etki alanı*\B'</span><span class="sxs-lookup"><span data-stu-id="53cb9-139">Domain user, member of '*DOMAIN*\A', '*DOMAIN*\B'</span></span>       | <span data-ttu-id="53cb9-140">Bilgisayar hesabı</span><span class="sxs-lookup"><span data-stu-id="53cb9-140">Computer account</span></span>
<span data-ttu-id="53cb9-141">Üye sunucusu veya iş istasyonu</span><span class="sxs-lookup"><span data-stu-id="53cb9-141">Member server or workstation</span></span> | <span data-ttu-id="53cb9-142">Varsayılan</span><span class="sxs-lookup"><span data-stu-id="53cb9-142">Default</span></span>                             | <span data-ttu-id="53cb9-143">Yerel bir kullanıcı, üyesi '*YERLEŞİK*\Administrators'</span><span class="sxs-lookup"><span data-stu-id="53cb9-143">Local user, member of '*BUILTIN*\Administrators'</span></span>        | <span data-ttu-id="53cb9-144">Bilgisayar hesabı</span><span class="sxs-lookup"><span data-stu-id="53cb9-144">Computer account</span></span>
<span data-ttu-id="53cb9-145">Üye sunucusu veya iş istasyonu</span><span class="sxs-lookup"><span data-stu-id="53cb9-145">Member server or workstation</span></span> | <span data-ttu-id="53cb9-146">C ve D yerel gruplar</span><span class="sxs-lookup"><span data-stu-id="53cb9-146">Local groups C and D</span></span>                | <span data-ttu-id="53cb9-147">Yerel bir kullanıcı, üyesi '*bilgisayar*\C' ve '*bilgisayar*\D'</span><span class="sxs-lookup"><span data-stu-id="53cb9-147">Local user, member of '*COMPUTER*\C' and '*COMPUTER*\D'</span></span> | <span data-ttu-id="53cb9-148">Bilgisayar hesabı</span><span class="sxs-lookup"><span data-stu-id="53cb9-148">Computer account</span></span>

<span data-ttu-id="53cb9-149">Güvenlik denetim olaylarını ve uygulama olay günlüklerini baktığınızda, her JEA kullanıcı oturumunu benzersiz bir sanal hesabı olduğunu görürsünüz.</span><span class="sxs-lookup"><span data-stu-id="53cb9-149">When you look at security audit events and application event logs, you will see that each JEA user session has a unique virtual account.</span></span>
<span data-ttu-id="53cb9-150">Bu kullanıcı eylemlerini JEA uç noktada komutu çalıştıran özgün kullanıcıya geri izlemenize yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="53cb9-150">This helps you track user actions in a JEA endpoint back to the original user who ran the command.</span></span>
<span data-ttu-id="53cb9-151">Sanal hesap adlarını izleyin biçimi "WinRM sanal kullanıcıların\\WinRM\_VA\_*ACCOUNTNUMBER*\_*etki alanı* \_ *sAMAccountName*"Örneğin, kullanıcı etki alanında"Contoso"" Alice"bir JEA uç hizmet yeniden başlarsa, tüm hizmet denetimi yöneticisi olaylarını ile ilişkili kullanıcı adını olması" WinRM sanal kullanıcıların\\WinRM\_ VA\_1\_contoso\_alice ".</span><span class="sxs-lookup"><span data-stu-id="53cb9-151">Virtual account names follow the format "WinRM Virtual Users\\WinRM\_VA\_*ACCOUNTNUMBER*\_*DOMAIN*\_*sAMAccountName*" For example, if user "Alice" in domain "Contoso" restarts a service in a JEA endpoint, the username associated with any service control manager events would be "WinRM Virtual Users\\WinRM\_VA\_1\_contoso\_alice".</span></span>


<span data-ttu-id="53cb9-152">**Grup yönetilen hizmet hesapları (gmsa'ları)** bir üye sunucuya ağ kaynaklarına erişim JEA oturumunuz gerektiğinde kullanışlıdır.</span><span class="sxs-lookup"><span data-stu-id="53cb9-152">**Group managed service accounts (gMSAs)** are useful when a member server needs to have access to network resources in the JEA session.</span></span>
<span data-ttu-id="53cb9-153">Bu bir örnek kullanım örneği farklı bir makinede barındırılan bir REST API erişimi denetlemek için kullanılan bir JEA uç noktadır.</span><span class="sxs-lookup"><span data-stu-id="53cb9-153">An example use case for this is a JEA endpoint that is used to control access to a REST API hosted on a different machine.</span></span>
<span data-ttu-id="53cb9-154">Bir ağ kimliğini işlevleri REST API istenen çağrılarını yapmak için ancak API ile kimlik doğrulamak için gereken yazma kolaydır.</span><span class="sxs-lookup"><span data-stu-id="53cb9-154">It is easy to write functions to make the desired invocations on the REST API, but in order to authenticate with the API you need a network identity.</span></span>
<span data-ttu-id="53cb9-155">Grup yönetilen hizmet hesabı kullanarak "ikinci atlama" hala üzerinde bilgisayar hesabı kullanabilirsiniz denetim yaparken mümkün kılar.</span><span class="sxs-lookup"><span data-stu-id="53cb9-155">Using a group managed service account makes the "second hop" possible while still having control over which computers can use the account.</span></span>
<span data-ttu-id="53cb9-156">GMSA etkili izinleri gMSA hesabının ait olduğu güvenlik grupları (yerel veya etki alanı) tarafından tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="53cb9-156">The effective permissions of the gMSA are defined by the security groups (local or domain) to which the gMSA account belongs.</span></span>

<span data-ttu-id="53cb9-157">JEA uç noktası bir gMSA hesabı kullanmak üzere yapılandırıldığında, yönetilen hizmet hesabı aynı grubundan gelen tüm JEA kullanıcılar eylemler görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="53cb9-157">When a JEA endpoint is configured to use a gMSA account, the actions of all JEA users will appear to come from the same group managed service account.</span></span>
<span data-ttu-id="53cb9-158">Belirli bir kullanıcıya geri eylemleri izleyebilirsiniz tek bir PowerShell oturumu dökümü çalıştırma komutları kümesini tanımlamak için yoludur.</span><span class="sxs-lookup"><span data-stu-id="53cb9-158">The only way you can trace actions back to a specific user is to identify the set of commands run in a PowerShell session transcript.</span></span>

<span data-ttu-id="53cb9-159">**Geçişi aracılığı kimlik bilgilerini** , olmayan bir farklı çalıştır hesabı olarak belirttiğiniz ve uzak sunucuda komutları çalıştırmak için bağlanan kullanıcının kimlik bilgilerini kullanmak için PowerShell istediğinizde kullanılır.</span><span class="sxs-lookup"><span data-stu-id="53cb9-159">**Pass-thru credentials** are used when you do not specify a run as account and want PowerShell to use the connecting user's credential to run commands on the remote server.</span></span>
<span data-ttu-id="53cb9-160">Bu yapılandırma *değil* ayrıcalıklı yönetim gruplarına bağlanma kullanıcı doğrudan erişim vermek için gerektirecek şekilde JEA için önerilir.</span><span class="sxs-lookup"><span data-stu-id="53cb9-160">This configuration is *not* recommended for JEA as it would require you to grant the connecting user direct access to privileged management groups.</span></span>
<span data-ttu-id="53cb9-161">Bağlanan kullanıcının yönetici ayrıcalıkları varsa, bunlar JEA tamamen önlemek ve diğer, Kısıtlanmamış yollar üzerinden yönetebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="53cb9-161">If the connecting user already has admin privileges, they can avoid JEA altogether and manage the system via other, unconstrained means.</span></span>
<span data-ttu-id="53cb9-162">Aşağıdaki bölüme bakın [JEA admins karşı korumaz](#jea-does-not-protect-against-admins) daha fazla bilgi için.</span><span class="sxs-lookup"><span data-stu-id="53cb9-162">See the section below on how [JEA does not protect against admins](#jea-does-not-protect-against-admins) for more information.</span></span>

<span data-ttu-id="53cb9-163">**Standart farklı çalıştır hesapları** tüm PowerShell oturumu altında çalışacağı herhangi bir kullanıcı hesabı belirtmenizi sağlar.</span><span class="sxs-lookup"><span data-stu-id="53cb9-163">**Standard run as accounts** allow you to specify any user account under which the entire PowerShell session will run.</span></span>
<span data-ttu-id="53cb9-164">Bir oturum yapılandırması sabit farklı çalıştır hesabı olarak kullanmak üzere ayarlamak için önemli bir fark budur (ile `-RunAsCredential` parametresi) JEA uyumlu değil.</span><span class="sxs-lookup"><span data-stu-id="53cb9-164">This is an important distinction, because a session configuration set to use a fixed run as account (with the `-RunAsCredential` parameter) is not JEA-aware.</span></span>
<span data-ttu-id="53cb9-165">Rol Tanımları artık beklendiği gibi çalışmaz ve uç noktasına erişmek için yetkili her kullanıcı aynı role atanması anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="53cb9-165">That means that role definitions no longer function as expected, and every user authorized to access the endpoint will be assigned the same role.</span></span>

<span data-ttu-id="53cb9-166">Bir RunAsCredential JEA noktadaki geri belirli kullanıcılar ve eylemleri Kullanıcıları rollerine eşlemek için destek eksikliği izleme zorluk nedeniyle kullanmamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="53cb9-166">You should not use a RunAsCredential on a JEA endpoint because of the difficulty in tracing actions back to specific users and the lack of support for mapping users to roles.</span></span>

## <a name="winrm-endpoint-acl"></a><span data-ttu-id="53cb9-167">WinRM Endpoint ACL</span><span class="sxs-lookup"><span data-stu-id="53cb9-167">WinRM Endpoint ACL</span></span>

<span data-ttu-id="53cb9-168">Normal PowerShell uzaktan iletişim uç ile denetimleri WinRM yapılandırmasında bir ayrı bir erişim denetim listesi (ACL) her JEA bitiş taşıdığından kimin JEA bitiş noktası ile doğrulanabilir.</span><span class="sxs-lookup"><span data-stu-id="53cb9-168">As with regular PowerShell remoting endpoints, each JEA endpoint has a separate access control list (ACL) set in the WinRM configuration that controls who can authenticate with the JEA endpoint.</span></span>
<span data-ttu-id="53cb9-169">Hatalı biçimde yapılandırdıysanız, güvenilen kullanıcıların JEA uç noktasına erişmek mümkün olmayabilir ve/veya güvenilmeyen kullanıcıların erişim elde.</span><span class="sxs-lookup"><span data-stu-id="53cb9-169">If improperly configured, trusted users may not be able to access the JEA endpoint and/or untrusted users may gain access.</span></span>
<span data-ttu-id="53cb9-170">WinRM ACL ancak JEA roller kullanıcılara eşleme etkilemez.</span><span class="sxs-lookup"><span data-stu-id="53cb9-170">The WinRM ACL does not, however, affect the mapping of users to JEA roles.</span></span>
<span data-ttu-id="53cb9-171">Tarafından denetlenen *RoleDefinitions* sistemde kaydedildiği oturum yapılandırma dosyasında alan.</span><span class="sxs-lookup"><span data-stu-id="53cb9-171">That is controlled by the *RoleDefinitions* field in the session configuration file that was registered on the system.</span></span>

<span data-ttu-id="53cb9-172">Bir oturum yapılandırma dosyası ve bir veya daha fazla rol özellikleri, kullanarak bir JEA uç noktasını kaydetme, varsayılan olarak, bir veya daha fazla rol erişim uç noktasına eşleme tüm kullanıcılara izin vermek için WinRM ACL yapılandırılır.</span><span class="sxs-lookup"><span data-stu-id="53cb9-172">By default, when you register a JEA endpoint using a session configuration file and one or more role capabilities, the WinRM ACL will be configured to allow all users mapping to one or more roles access to the endpoint.</span></span>
<span data-ttu-id="53cb9-173">Örneğin, aşağıdaki komutları kullanarak yapılandırılmış bir JEA oturumu tam erişim izni verecek *CONTOSO\JEA\_Lev1* ve *CONTOSO\JEA\_Lev2*.</span><span class="sxs-lookup"><span data-stu-id="53cb9-173">For example, a JEA session configured using the following commands will grant full access to *CONTOSO\JEA\_Lev1* and *CONTOSO\JEA\_Lev2*.</span></span>

```powershell
$roles = @{ 'CONTOSO\JEA_Lev1' = 'Lev1Role'; 'CONTOSO\JEA_Lev2' = 'Lev2Role' }
New-PSSessionConfigurationFile -Path '.\jea.pssc' -SessionType RestrictedRemoteServer -RoleDefinitions $roles -RunAsVirtualAccount
Register-PSSessionConfiguration -Path '.\jea.pssc' -Name 'MyJEAEndpoint'
```

<span data-ttu-id="53cb9-174">Kullanıcı izinleri olan denetim [Get-PSSessionConfiguration](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.core/get-pssessionconfiguration) cmdlet'i.</span><span class="sxs-lookup"><span data-stu-id="53cb9-174">You can audit user permissions with the [Get-PSSessionConfiguration](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.core/get-pssessionconfiguration) cmdlet.</span></span>

```powershell
PS C:\> Get-PSSessionConfiguration -Name 'MyJEAEndpoint' | Select-Object Permission

Permission
----------
CONTOSO\JEA_Lev1 AccessAllowed
CONTOSO\JEA_Lev2 AccessAllowed
```

<span data-ttu-id="53cb9-175">Hangi kullanıcıların erişimi değiştirmek için ya da çalıştırmak `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -ShowSecurityDescriptorUI` etkileşimli bir istem için veya `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -SecurityDescriptorSddl <SDDL string>` izinlerini güncelleştirmek için.</span><span class="sxs-lookup"><span data-stu-id="53cb9-175">To change which users have access, run either `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -ShowSecurityDescriptorUI` for an interactive prompt or `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -SecurityDescriptorSddl <SDDL string>` to update the permissions.</span></span>
<span data-ttu-id="53cb9-176">Kullanıcıların gereken en az *Invoke* JEA uç noktasına erişmek için hakları.</span><span class="sxs-lookup"><span data-stu-id="53cb9-176">Users need at least *Invoke* rights to access the JEA endpoint.</span></span>

<span data-ttu-id="53cb9-177">Ek kullanıcılar JEA uç noktasına erişimi verilir, ancak oturum yapılandırma dosyasında tanımlanan rolleri hiçbirine kalan değil, JEA oturumu başlatmak, ancak yalnızca varsayılan cmdlet'leri erişimi mümkün olacaktır.</span><span class="sxs-lookup"><span data-stu-id="53cb9-177">If additional users are granted access to the JEA endpoint but do not fall into any of the roles defined in the session configuration file, they will be able to start a JEA session but only have access to the default cmdlets.</span></span>
<span data-ttu-id="53cb9-178">Kullanıcı izinleri JEA uç noktada çalıştırarak denetleyebilirsiniz `Get-PSSessionCapability`.</span><span class="sxs-lookup"><span data-stu-id="53cb9-178">You can audit user permissions in a JEA endpoint by running `Get-PSSessionCapability`.</span></span>
<span data-ttu-id="53cb9-179">Kullanıma [denetim ve JEA üzerinde raporlama](audit-and-report.md) denetimi hakkında daha fazla bilgi için bir kullanıcı komutları makalesine bir JEA uç erişimi vardır.</span><span class="sxs-lookup"><span data-stu-id="53cb9-179">Check out the [Auditing and Reporting on JEA](audit-and-report.md) article for more information about auditing which commands a user has access to in a JEA endpoint.</span></span>

## <a name="least-privilege-roles"></a><span data-ttu-id="53cb9-180">En az ayrıcalık rolleri</span><span class="sxs-lookup"><span data-stu-id="53cb9-180">Least privilege roles</span></span>

<span data-ttu-id="53cb9-181">JEA rolleri tasarlarken, sanal veya grup yönetilen hizmet hesabı çalıştırılması arka planda genellikle yerel makine yönetmek için sınırsız erişimi olduğunu unutmamak önemlidir.</span><span class="sxs-lookup"><span data-stu-id="53cb9-181">When designing JEA roles, it is important to remember that the virtual or group managed service account running behind the scenes often has unrestricted access to manage the local machine.</span></span>
<span data-ttu-id="53cb9-182">JEA rol özellikleri yardımcı olması için bu hesabı ne kullanılabilir kısıtlamak, ayrıcalıklı bağlamını kullanarak çalışan uygulamaları ve komutları sınırlandırırsınız.</span><span class="sxs-lookup"><span data-stu-id="53cb9-182">JEA role capabilities help restrict what that account can be used for by limiting the commands and applications that can be run using that privileged context.</span></span>
<span data-ttu-id="53cb9-183">Yanlış bir şekilde tasarlanmış roller JEA sınırları dışında bölün veya hassas bilgilere erişim elde etmek bir kullanıcı izin verebilir çalıştırmak tehlikeli komutları izin verebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="53cb9-183">Improperly designed roles can allow dangerous commands to run that may allow a user to break out of the JEA boundaries or obtain access to sensitive information.</span></span>

<span data-ttu-id="53cb9-184">Örneğin, aşağıdaki Rol Yetenek giriş göz önünde bulundurun:</span><span class="sxs-lookup"><span data-stu-id="53cb9-184">For example, consider the following role capability entry:</span></span>

```powershell
@{
    VisibleCmdlets = 'Microsoft.PowerShell.Management\*-Process'
}
```

<span data-ttu-id="53cb9-185">Bu rol özelliği kullanıcıların herhangi bir PowerShell cmdlet'i Microsoft.PowerShell.Management modülünden "İşlem" isim ile çalıştırmasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="53cb9-185">This role capability allows users to run any PowerShell cmdlet with the noun "Process" from the Microsoft.PowerShell.Management module.</span></span>
<span data-ttu-id="53cb9-186">Kullanıcıların cmdlet'leri gibi erişim gerekebilir `Get-Process` ne uygulamaları sistem üzerinde çalışan anlamak için ve `Stop-Process` herhangi sonlandırmak için uygulamaları askıda kaldı.</span><span class="sxs-lookup"><span data-stu-id="53cb9-186">Users may need to access cmdlets like `Get-Process` to understand what applications are running on the system and `Stop-Process` to kill any hung applications.</span></span>
<span data-ttu-id="53cb9-187">Ancak, bu girdi ayrıca tanır `Start-Process`, tam yönetici izinlerine sahip bir rastgele programını başlatmak için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="53cb9-187">However, this entry also allows `Start-Process`, which can be used to start up an arbitrary program with full administrator permissions.</span></span>
<span data-ttu-id="53cb9-188">Program bir saldırganın yalnızca bağlanan kullanıcı yerel yönetici ayrıcalıkları, çalışır kötü amaçlı yazılım ve daha fazlasını sunan bir dosya paylaşımında bir programı başlatabileceği şekilde sistem üzerinde yerel olarak yüklü olması gerekmez.'</span><span class="sxs-lookup"><span data-stu-id="53cb9-188">The program doesn't need to be installed locally on the system, so an adversary could simply start a program on a file share that gives the connecting user local admin privileges, runs malware, and more.'</span></span>

<span data-ttu-id="53cb9-189">Bu aynı rol özellik daha güvenli bir sürümü gibi görünür:</span><span class="sxs-lookup"><span data-stu-id="53cb9-189">A more secure version of this same role capability would look like:</span></span>

```powershell
@{
    VisibleCmdlets = 'Microsoft.PowerShell.Management\Get-Process', 'Microsoft.PowerShell.Management\Stop-Process'
}
```

<span data-ttu-id="53cb9-190">Rol özellikleri joker karakterleri kullanmaktan kaçının ve emin olun [denetim etkin kullanıcı izinlerini](audit-and-report.md#check-effective-rights-for-a-specific-user) düzenli olarak, bir kullanıcı komutları anlamak için erişimi vardır.</span><span class="sxs-lookup"><span data-stu-id="53cb9-190">Avoid using wildcards in role capabilities, and be sure to [audit effective user permissions](audit-and-report.md#check-effective-rights-for-a-specific-user) regularly to understand which commands a user has access to.</span></span>

## <a name="jea-does-not-protect-against-admins"></a><span data-ttu-id="53cb9-191">JEA admins karşı koruma sağlamaz</span><span class="sxs-lookup"><span data-stu-id="53cb9-191">JEA does not protect against admins</span></span>

<span data-ttu-id="53cb9-192">JEA çekirdek ilkeleri biri gerçekleştirmek yönetici olmayanlar izin verdiğini *bazı* yönetim görevleri.</span><span class="sxs-lookup"><span data-stu-id="53cb9-192">One of the core principles of JEA is that it allows non-admins to perform *some* admin tasks.</span></span>
<span data-ttu-id="53cb9-193">JEA zaten yönetici ayrıcalıklarına sahip olanlar karşı koruma sağlamaz.</span><span class="sxs-lookup"><span data-stu-id="53cb9-193">JEA does not protect against those who already have administrator privileges.</span></span>
<span data-ttu-id="53cb9-194">Kullanıcılar "domain admins", "Yerel yöneticileri," ait veya diğer üst düzey Ayrıcalıklı Grup ortamınızda başka bir yöntem aracılığıyla makinede imzalayarak JEA'ın korumaları alabilir olmaya devam edecektir.</span><span class="sxs-lookup"><span data-stu-id="53cb9-194">Users who belong "domain admins," "local admins," or other highly privileged groups in your environment will still be able to get around JEA's protections by signing into the machine via another means.</span></span>
<span data-ttu-id="53cb9-195">Bunlar Örneğin, oturum RDP oturumu, uzak konsolları veya Kısıtlanmamış PowerShell Uç noktalara bağlanmak.</span><span class="sxs-lookup"><span data-stu-id="53cb9-195">They could, for example, sign in with RDP, use remote MMC consoles, or connect to unconstrained PowerShell endpoints.</span></span>
<span data-ttu-id="53cb9-196">Sistemde yerel yöneticiler de JEA yapılandırmaları sistem yönetmek veya bir kullanıcı kendi JEA oturumunda neler yapabileceğinizi kapsamını genişletmek için bir rol özelliği değiştirmek ek kullanıcılara izin verecek şekilde değiştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="53cb9-196">Local admins on the system can also modify JEA configurations to allow additional users to manage the system or change a role capability to extend the scope of what a user can do in their JEA session.</span></span>
<span data-ttu-id="53cb9-197">Bu nedenle, sistem ayrıcalıklı erişim elde edebilir diğer yolları olup olmadığını görmek için genişletilmiş izinleri JEA kullanıcılarınızın değerlendirmek önemlidir.</span><span class="sxs-lookup"><span data-stu-id="53cb9-197">It is therefore important to evaluate your JEA users' extended permissions to see if there are other ways they could gain privileged access to the system.</span></span>

<span data-ttu-id="53cb9-198">JEA düzenli günlük bakım kullanıyorsanız ve bir "biraz zaman" ayrıcalıklı için ortak bir uygulama olan erişim yönetimi çözümü kullanıcıların geçici olarak yerel Yöneticiler acil durumlarda duruma olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="53cb9-198">A common practice is to use JEA for regular day-to-day maintenance and have a "just in time" privileged access management solution allow users to temporarily become local admins in emergency situations.</span></span>
<span data-ttu-id="53cb9-199">Bu, kullanıcıların sistemde kalıcı yönetici değildir, ancak bu hakları varsa ve yalnızca bunlar bu izinleri kullanımını belgeleri bir iş akışı tamamlandığında, alabilirsiniz sağlamaya yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="53cb9-199">This helps ensure users are not permanent admins on the system, but can get those rights if, and only when, they complete a workflow that documents their use of those permissions.</span></span>

